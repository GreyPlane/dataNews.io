{"version":3,"sources":["webpack:///$_lazy_route_resource lazy namespace object","webpack:///src/app/amap-container/amap-container.component.ts","webpack:///src/app/amap-container/amap-container.component.html","webpack:///src/app/app-routing.module.ts","webpack:///src/app/app.component.ts","webpack:///src/app/app.component.html","webpack:///src/app/app.module.ts","webpack:///src/app/content-card/content-card.component.ts","webpack:///src/app/content-card/content-card.component.html","webpack:///src/app/my-material/my-material.module.ts","webpack:///src/app/path-schedule.service.ts","webpack:///src/app/sankey-data-provider.service.ts","webpack:///src/app/sankey-demo/sankey-demo.component.ts","webpack:///src/app/sankey-demo/sankey-demo.component.html","webpack:///src/app/sankey/sankey.component.ts","webpack:///src/app/sankey/sankey.component.html","webpack:///src/app/search-bar/search-bar.component.ts","webpack:///src/app/search-bar/search-bar.component.html","webpack:///src/constants/data.ts","webpack:///src/constants/enum.ts","webpack:///src/constants/text.ts","webpack:///src/environments/environment.ts","webpack:///src/main.ts","webpack:///src/types/data.ts","webpack:///src/types/sankey.ts"],"names":["webpackEmptyAsyncContext","req","Promise","resolve","then","e","Error","code","keys","module","exports","id","AmapContainerComponent","amapPlaceSearch","amapWalkNavi","snackBar","dialog","pathSchedule","amapDriveNavi","http","isShowTransferStation","isShowFactory","wasteCategories","Dry","Moist","Recycle","wasteCategroiesName","isMapReady","isLocated","amap","isPlaceSearchPending","isWalkNaviPending","isDriveNaviPending","_destroy$","addressControl","required","categoryControl","isLineHovering","valueChanges","pipe","subscribe","value","applyDriveNavi","temp$","get","size","width","height","offset","x","y","options","imageOffset","imageSize","transferIcon","image","factoryIcon","homeIcon","next","complete","err","open","duration","markers","getAllOverlays","remove","clearMarkers","type","target","setOptions","isOutline","category","data","dest","promisePS","of","map","city","citylimit","autoFitView","promiseWN","promiseDN","all","plugins","amapPlaceSearchPlugin","initPlaceSearch","amapWalkNaviPlugin","initWalkNavi","amapDriveNaviPlugin","initDriveNavi","catch","console","log","isPlaceSearchComplete$","on","res","selectedPoi","poiList","pois","info","NO_DATA","selectChangeEvent","selected","errorHandler","keyword","search","finally","isWalkNaviComplete$","walkNaviResult","isDriveNaviComplete$","driveNaviResult","Harzard","plugin","start","getPoint","location","transferStation","lnglgt","factory","driveResultes","status","every","result","COMPLETE","trans","fac","assertDriveResult","pathToTransferStation","routes","steps","step","path","reduce","acc","concat","pathToFactory","setFitView","walkResultes","val","resultTrans","resultFac","assertWalkResult","routesTrans","routesFac","assertWalkRoutes","Array","isArray","assertWalkRoute","route","undefined","onMapReady","applyPlaceSearch","selector","templateUrl","styleUrls","providers","AppRoutingModule","forRoot","imports","AppComponent","breakPointObserver","title","window","alert","AppModule","apiKey","declarations","bootstrap","ContentCardComponent","categroy","content","MyMaterialModule","provide","useValue","displayDefaultIndicatorType","PathScheduleService","a","b","distance","xsMatchedDist","xsMatchedCate","length","sort","shortestDistanceWithStart","p1","p2","EARTH_RADIUS","rad","ang","Math","PI","p1Lat","p2Lat","round","asin","sqrt","pow","sin","cos","strategy","factories","transferStations","cate","fn","ffn","tag","FACTORY","some","c","kind","BURNING","LANDFILL","RECYCLE","ORG_SOILD","district","adname","getData","factoriesMatchedCate","filter","getFactroyCateFilter","factoriesMatchedDist","transfersMatchedDist","tra","PD","t","decide","providedIn","SankeyDataProviderService","pathScheduler","driveNaviService","destFactories","Set","destTansferStations","factoryKind2WasteCate","s","genNode","streets","nodes","links","Object","values","push","name","street","source","f","getShortestTans2Fac","find","add","has","wrapper$","invokeSearch","setTimeout","count","timeout","reject","adcode","group","results","tansferStation","end","SankeyDemoComponent","sankeyDataProvider","data$","SankeyComponent","alignment","JUSTIFY","nodeWidth","nodePadding","margin","top","bottom","left","right","labelPadding","colorScale","sankeyLayout","generate","changes","isFirstChange","currentValue","svgWidth","svgHeight","align","generator","nodeAlign","extent","nodeId","d","layout","node","color","label","x0","x1","y1","y0","dy","link","toString","max","SearchBarComponent","breakpointObserver","isHandset$","observe","Handset","matches","wasteCategroies","names","rawData","序号","区","设施名称","地址","pos","rawDataTwo","运行单位","array2LngLgt","raw","split","it","Number","convert","positions","item","TANSFER_STATION","convertFac","includes","positionsT","positionsF","WASTE_CATEGORY","RESULT_STATUS","ERROR_STATUS","text","environment","production","bootstrapModule","error","POSITION_TAG","DISTRICT","CATEGORY_OF_FACTORY","ALIGNMENT"],"mappings":";;;;;;;;;;;;;;;;;AAAA,aAASA,wBAAT,CAAkCC,GAAlC,EAAuC;AACtC;AACA;AACA,aAAOC,OAAO,CAACC,OAAR,GAAkBC,IAAlB,CAAuB,YAAW;AACxC,YAAIC,CAAC,GAAG,IAAIC,KAAJ,CAAU,yBAAyBL,GAAzB,GAA+B,GAAzC,CAAR;AACAI,SAAC,CAACE,IAAF,GAAS,kBAAT;AACA,cAAMF,CAAN;AACA,OAJM,CAAP;AAKA;;AACDL,4BAAwB,CAACQ,IAAzB,GAAgC,YAAW;AAAE,aAAO,EAAP;AAAY,KAAzD;;AACAR,4BAAwB,CAACG,OAAzB,GAAmCH,wBAAnC;AACAS,UAAM,CAACC,OAAP,GAAiBV,wBAAjB;AACAA,4BAAwB,CAACW,EAAzB,GAA8B,yCAA9B;;;;;;;;;;;;;;;;ACZA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACkBM;;AACE;;AASA;;AAKA;;AAOF;;;;;;;;AApBI;;AAAA,yGAAmC,cAAnC,EAAmC,CAAnC,EAAmC,UAAnC,EAAmC,OAAnC,EAAmC,cAAnC,EAAmC,CAAnC,EAAmC,eAAnC,EAAmC,GAAnC,EAAmC,aAAnC,EAAmC,SAAnC,EAAmC,aAAnC,EAAmC,OAAnC;;AASA;;AAAA,gHAA0C,OAA1C,EAA0C,cAA1C,EAA0C,MAA1C,EAA0C,gBAA1C;;AAKA;;AAAA,wJAEC,OAFD,EAEC,8BAFD,EAEC,MAFD,EAEC,oBAFD;;;;;;AAjBN;;AACE;;AAuBF;;;;;;AAvBgB;;AAAA;;;;;;AAyBd;;AACE;;AASA;;AAOA;;AAKF;;;;;;;;AApBI;;AAAA,iGAA2B,cAA3B,EAA2B,CAA3B,EAA2B,UAA3B,EAA2B,OAA3B,EAA2B,eAA3B,EAA2B,GAA3B,EAA2B,cAA3B,EAA2B,CAA3B,EAA2B,aAA3B,EAA2B,KAA3B,EAA2B,aAA3B,EAA2B,OAA3B;;AASA;;AAAA,wJAEC,OAFD,EAEC,8BAFD,EAEC,MAFD,EAEC,oBAFD;;AAOA;;AAAA,wIAA8D,OAA9D,EAA8D,sBAA9D,EAA8D,MAA9D,EAA8D,mBAA9D;;;;;;AAnBN;;AACE;;AAuBF;;;;;;AAvBgB;;AAAA;;;;;;AAhClB;;AAME;;AAyBA;;AAyBF;;;;;;AAlDgB;;AAAA;;AAyBA;;AAAA;;;;;;AAiDd;;;;;;AAEE,+GAAqC,OAArC,EAAqC,wBAArC,EAAqC,MAArC,EAAqC,gBAArC;;;;;;AAIF;;;;;;AAEE,sJAAoE,OAApE,EAAoE,iCAApE,EAAoE,MAApE,EAAoE,oBAApE;;;;;;AAIF;;;;;;AAEE,sIAAoD,OAApD,EAAoD,yBAApD,EAAoD,MAApD,EAAoD,mBAApD;;;;;;;;AAnCF;;AAME;AAAA;;AAAA;;AAAA,6CAAiC,WAAjC;AAA4C,SAA5C,EAA8C,UAA9C,EAA8C;AAAA;;AAAA;;AAAA,6CACd,UADc;AACJ,SAD1C,EAA8C,eAA9C,EAA8C;AAAA;;AAAA;;AAAA;AAAA,SAA9C;;AAGD;;AACD;;AAOE;AAAA;;AAAA;;AAAA,6CAAiC,WAAjC;AAA4C,SAA5C,EAA8C,UAA9C,EAA8C;AAAA;;AAAA;;AAAA,6CACd,UADc;AACJ,SAD1C,EAA8C,eAA9C,EAA8C;AAAA;;AAAA;;AAAA;AAAA,SAA9C;;AAGD;;AACD;;AAMA;;AAMA;;;;;;AAhCE,uGAA8B,cAA9B,EAA8B,CAA9B,EAA8B,UAA9B,EAA8B,OAA9B,EAA8B,cAA9B,EAA8B,CAA9B,EAA8B,cAA9B,EAA8B,KAA9B;;AAUA;;AAAA,+FAAsB,aAAtB,EAAsB,6CAAtB,EAAsB,UAAtB,EAAsB,OAAtB,EAAsB,cAAtB,EAAsB,KAAtB,EAAsB,cAAtB,EAAsB,CAAtB,EAAsB,cAAtB,EAAsB,CAAtB;;AAWA;;AAAA;;AAMA;;AAAA;;AAMA;;AAAA;;;;;;AAmB0B;;;;;;AAsCA;;;;;;AAItB;;AAIE;;AACF;;;;;;;;;AAHE;;AAEA;;AAAA;;;;;;AAMN;;AAAU;;AAAW;;;;;;AAGrB;;AAAU;;AAAO;;;;;;;;QDzIVC,sB;;;AA8CX,sCACmBC,eADnB,EAEmBC,YAFnB,EAGmBC,QAHnB,EAImBC,MAJnB,EAKmBC,YALnB,EAMmBC,aANnB,EAOmBC,IAPnB,EAOmC;AAAA;;AANhB,aAAAN,eAAA,GAAAA,eAAA;AACA,aAAAC,YAAA,GAAAA,YAAA;AACA,aAAAC,QAAA,GAAAA,QAAA;AACA,aAAAC,MAAA,GAAAA,MAAA;AACA,aAAAC,YAAA,GAAAA,YAAA;AACA,aAAAC,aAAA,GAAAA,aAAA;AACA,aAAAC,IAAA,GAAAA,IAAA;AApDnB,aAAAC,qBAAA,GAAiC,KAAjC;AACA,aAAAC,aAAA,GAAyB,KAAzB;AAEA,aAAAC,eAAA,GAAoC,CAClC,kEAAeC,GADmB,EAElC,kEAAeC,KAFmB,EAGlC;AACA,0EAAeC,OAJmB,CAApC;AAMA,aAAAC,mBAAA,GAAsB,sEAAtB;AAEA,aAAAC,UAAA,GAAa,KAAb;AACA,aAAAC,SAAA,GAAY,KAAZ;AAEA,aAAAC,IAAA,GAAa,IAAb;AAKA,aAAAC,oBAAA,GAAuB,KAAvB;AAMA,aAAAC,iBAAA,GAAoB,KAApB;AAKA,aAAAC,kBAAA,GAAqB,KAArB;AAUQ,aAAAC,SAAA,GAAY,IAAI,4CAAJ,EAAZ;AAED,aAAAC,cAAA,GAAiB,IAAI,0DAAJ,CAAgB,EAAhB,EAAoB,0DAAWC,QAA/B,CAAjB;AACA,aAAAC,eAAA,GAAkB,IAAI,0DAAJ,CAAgB,EAAhB,CAAlB;AACA,aAAAC,cAAA,GAA0B,KAA1B;AASH;;;;mCAEO;AAAA;;AACT,eAAKD,eAAL,CAAqBE,YAArB,CACGC,IADH,CACQ,iEAAU,KAAKN,SAAf,CADR,EAEGO,SAFH,CAEa,UAACC,KAAD,EAAW;AACpB,iBAAI,CAACC,cAAL,CAAoBD,KAApB;AACD,WAJH,EADS,CAMT;;AACA,eAAKE,KAAL,GAAa,KAAKxB,IAAL,CACVyB,GADU,CACQ,2BADR,EAEVL,IAFU,CAEL,iEAAU,KAAKN,SAAf,CAFK,CAAb;AAGA,cAAMY,IAAI,GAAG;AAAEC,iBAAK,EAAE,EAAT;AAAaC,kBAAM,EAAE;AAArB,WAAb;AACA,cAAMC,MAAM,GAAG;AAAEC,aAAC,EAAE,CAAL;AAAQC,aAAC,EAAE;AAAX,WAAf;AACA,cAAMC,OAAO,GAAG;AACdN,gBAAI,EAAJA,IADc;AAEdO,uBAAW,EAAEJ,MAFC;AAGdK,qBAAS,EAAER;AAHG,WAAhB;AAKA,eAAKS,YAAL,GAAoB;AAClBD,qBAAS,EAAER,IADO;AAElBU,iBAAK,EAAE,uBAFW;AAGlBV,gBAAI,EAAEA,IAHY;AAIlBO,uBAAW,EAAEJ;AAJK,WAApB;AAMA,eAAKQ,WAAL,GAAmB,MAAH,OAAG,CAAH;AACdD,iBAAK,EAAE;AADO,WAAG,EAEdJ,OAFc,CAAnB;AAIA,eAAKM,QAAL,GAAgB,MAAH,OAAG,CAAH;AACXF,iBAAK,EAAE;AADI,WAAG,EAEXJ,OAFW,CAAhB;AAID;;;sCACa;AACZ;AACA;AACA;AACA,eAAKlB,SAAL,CAAeyB,IAAf;;AACA,eAAKzB,SAAL,CAAe0B,QAAf;AACD;;;qCACYC,G,EAAa;AACxB,eAAK7C,QAAL,CAAc8C,IAAd,4BAAuCD,GAAvC,kBAAyD,IAAzD,EAA+D;AAC7DE,oBAAQ,EAAE;AADmD,WAA/D;AAGD;;;uCACc;AACb,cAAMjC,IAAI,GAAG,KAAKA,IAAlB;AACA,cAAMkC,OAAO,GAAGlC,IAAI,CAACmC,cAAL,CAAoB,QAApB,CAAhB;AACAnC,cAAI,CAACoC,MAAL,CAAYF,OAAZ;AACD;;;sCACa;AACZ,eAAKG,YAAL;AACA,eAAK7C,aAAL,GAAqB,CAAC,KAAKA,aAA3B;AACD;AACD;;;;;;oCAGmB;AACjB,eAAK6C,YAAL;AACA,eAAK9C,qBAAL,GAA6B,CAAC,KAAKA,qBAAnC;AACD;;;oCACWf,C,EAAQ8D,I,EAAgC;AAClD,kBAAQA,IAAR;AACE,iBAAK,WAAL;AACE9D,eAAC,CAAC+D,MAAF,CAASC,UAAT,CAAoB;AAClBC,yBAAS,EAAE;AADO,eAApB;AAGA;;AACF,iBAAK,UAAL;AACEjE,eAAC,CAAC+D,MAAF,CAASC,UAAT,CAAoB;AAClBC,yBAAS,EAAE;AADO,eAApB;AAGA;;AAEF;AACE;AAbJ;AAeD;;;oCACWC,Q,EAA0B;AACpC,eAAKvD,MAAL,CAAY6C,IAAZ,CAAiB,gGAAjB,EAAuC;AACrCW,gBAAI,EAAE;AAAED,sBAAQ,EAARA,QAAF;AAAYE,kBAAI,EAAE,KAAKA;AAAvB;AAD+B,WAAvC;AAGD;;;mCACU5C,I,EAAW;AAAA;;AACpB,eAAKF,UAAL,GAAkB,IAAlB;AACA,eAAKE,IAAL,GAAYA,IAAZ;AACA,cAAM6C,SAAS,GAAG,KAAK7D,eAAL,CAAqB8D,EAArB,CAAwB;AACxCC,eAAG,EAAE,KAAK/C,IAD8B;AAExCgD,gBAAI,EAAE,IAFkC;AAGxCC,qBAAS,EAAE,IAH6B;AAIxCC,uBAAW,EAAE;AAJ2B,WAAxB,CAAlB;AAMA,cAAMC,SAAS,GAAG,KAAKlE,YAAL,CAAkB6D,EAAlB,CAAqB;AACrC;AACAI,uBAAW,EAAE;AAFwB,WAArB,CAAlB;AAIA,cAAME,SAAS,GAAG,KAAK/D,aAAL,CAAmByD,EAAnB,CAAsB;AACtC;AACAI,uBAAW,EAAE;AAFyB,WAAtB,CAAlB;AAIA7E,iBAAO,CAACgF,GAAR,CAAY,CAACR,SAAD,EAAYM,SAAZ,EAAuBC,SAAvB,CAAZ,EACG7E,IADH,CACQ,UAAC+E,OAAD,EAAa;AACjB,kBAAI,CAACC,qBAAL,GAA6BD,OAAO,CAAC,CAAD,CAApC;;AACA,kBAAI,CAACE,eAAL;;AACA,kBAAI,CAACC,kBAAL,GAA0BH,OAAO,CAAC,CAAD,CAAjC;;AACA,kBAAI,CAACI,YAAL;;AACA,kBAAI,CAACC,mBAAL,GAA2BL,OAAO,CAAC,CAAD,CAAlC;;AACA,kBAAI,CAACM,aAAL;AACD,WARH,EASGC,KATH,CASS,UAAC9B,GAAD;AAAA,mBAAS+B,OAAO,CAACC,GAAR,8BAAkChC,GAAlC,EAAT;AAAA,WATT;AAUD;;;0CACiB;AAAA;;AAChB,eAAKiC,sBAAL,GAA8B,KAAKT,qBAAL,CAC3BU,EAD2B,CACxB,UADwB,EAE3BvD,IAF2B,CAG1B,2DAAI,UAACwD,GAAD;AAAA,mBAAU,MAAI,CAACC,WAAL,GAAmBD,GAAG,CAACE,OAAJ,CAAYC,IAAZ,CAAiB,CAAjB,CAA7B;AAAA,WAAJ,CAH0B,EAI1B,2DAAI,UAACH,GAAD;AAAA,mBAAUA,GAAG,CAACI,IAAJ,KAAa,iEAAcC,OAA3B,GAAqC,KAArC,GAA6C,IAAvD;AAAA,WAAJ,CAJ0B,EAK1B,8DAL0B,CAA9B;AAOA,eAAKhB,qBAAL,CACGU,EADH,CACM,eADN,EAEGvD,IAFH,CAEQ,iEAAU,KAAKN,SAAf,CAFR,EAGGO,SAHH,CAGa,UAAC6D,iBAAD,EAAuB;AAChC,kBAAI,CAACL,WAAL,GAAmBK,iBAAiB,CAACC,QAAlB,CAA2B9B,IAA9C;AACD,WALH;AAMA,eAAKY,qBAAL,CACGU,EADH,CACM,OADN,EAEGvD,IAFH,CAEQ,iEAAU,KAAKN,SAAf,CAFR,EAGGO,SAHH,CAGa,UAACoB,GAAD;AAAA,mBAAS,MAAI,CAAC2C,YAAL,CAAkB3C,GAAlB,CAAT;AAAA,WAHb;AAID;;;yCACgB4C,O,EAAiB;AAAA;;AAChC,eAAK1E,oBAAL,GAA4B,IAA5B;AACA,eAAKsD,qBAAL,CACGqB,MADH,CACUD,OADV,EAEGd,KAFH,CAES,UAAC9B,GAAD;AAAA,mBAAS,MAAI,CAAC2C,YAAL,CAAkB3C,GAAlB,CAAT;AAAA,WAFT,EAGG8C,OAHH,CAGW;AAAA,mBAAO,MAAI,CAAC5E,oBAAL,GAA4B,KAAnC;AAAA,WAHX;AAID;;;uCACc;AAAA;;AACb,eAAK6E,mBAAL,GAA2B,KAAKrB,kBAAL,CAAwBQ,EAAxB,CAA2B,UAA3B,EAAuCvD,IAAvC,CACzB,2DAAI,UAACwD,GAAD;AAAA,mBAAU,MAAI,CAACa,cAAL,GAAsBb,GAAhC;AAAA,WAAJ,CADyB,EAEzB,2DAAI,UAACA,GAAD;AAAA,mBAAUA,GAAG,CAACI,IAAJ,KAAa,iEAAcC,OAA3B,GAAqC,KAArC,GAA6C,IAAvD;AAAA,WAAJ,CAFyB,EAGzB,8DAHyB,CAA3B;AAKA,eAAKhB,qBAAL,CACGU,EADH,CACM,OADN,EAEGvD,IAFH,CAEQ,iEAAU,KAAKN,SAAf,CAFR,EAGGO,SAHH,CAGa,UAACoB,GAAD;AAAA,mBAAS,MAAI,CAAC2C,YAAL,CAAkB3C,GAAlB,CAAT;AAAA,WAHb;AAID;;;wCACe;AAAA;;AACd,eAAKiD,oBAAL,GAA4B,KAAKvB,kBAAL,CAAwBQ,EAAxB,CAA2B,UAA3B,EAAuCvD,IAAvC,CAC1B,2DAAI,UAACwD,GAAD;AAAA,mBAAU,MAAI,CAACe,eAAL,GAAuBf,GAAjC;AAAA,WAAJ,CAD0B,EAE1B,2DAAI,UAACA,GAAD;AAAA,mBAAUA,GAAG,CAACI,IAAJ,KAAa,iEAAcC,OAA3B,GAAqC,KAArC,GAA6C,IAAvD;AAAA,WAAJ,CAF0B,EAG1B,8DAH0B,CAA5B;AAKA,eAAKZ,mBAAL,CACGM,EADH,CACM,OADN,EAEGvD,IAFH,CAEQ,iEAAU,KAAKN,SAAf,CAFR,EAGGO,SAHH,CAGa,UAACoB,GAAD;AAAA,mBAAS,MAAI,CAAC2C,YAAL,CAAkB3C,GAAlB,CAAT;AAAA,WAHb;AAID;;;uCACcW,Q,EAA0B;AAAA;;AACvC,cAAIA,QAAQ,KAAK,kEAAewC,OAAhC,EAAyC;AACzC,cAAMC,MAAM,GAAG,KAAKxB,mBAApB;AACA,cAAMyB,KAAK,GAAG,KAAKjB,WAAnB;AACA,cAAMvB,IAAI,GAAG,KAAKxD,YAAL,CAAkBiG,QAAlB,CAA2BD,KAA3B,EAAkC1C,QAAlC,CAAb;AACA,cAAMR,OAAO,GAAG,KAAKlC,IAAL,CAAUmC,cAAV,CAAyB,QAAzB,CAAhB;AACA,eAAKS,IAAL,GAAYA,IAAZ;AACA,eAAKzC,kBAAL,GAA0B,IAA1B;AACA9B,iBAAO,CAACgF,GAAR,CAAY,CACV8B,MAAM,CAACP,MAAP,CAAcQ,KAAK,CAACE,QAApB,EAA8B1C,IAAI,CAAC2C,eAAL,CAAqBC,MAAnD,EAA2D,EAA3D,CADU,EAEVL,MAAM,CAACP,MAAP,CAAchC,IAAI,CAAC2C,eAAL,CAAqBC,MAAnC,EAA2C5C,IAAI,CAAC6C,OAAL,CAAaD,MAAxD,EAAgE,EAAhE,CAFU,CAAZ,EAIGjH,IAJH,CAIQ,UAACmH,aAAD,EAAmB;AACvB,gBAAMC,MAAM,GAAGD,aAAa,CAACE,KAAd,CACb,UAACC,MAAD;AAAA,qBAAYA,MAAM,CAACF,MAAP,KAAkB,iEAAcG,QAA5C;AAAA,aADa,CAAf;;AAGA,gBAAIH,MAAJ,EAAY;AACV,kBAAII,KAAK,GAAGL,aAAa,CAAC,CAAD,CAAb,CAAiBG,MAA7B;AACA,kBAAIG,GAAG,GAAGN,aAAa,CAAC,CAAD,CAAb,CAAiBG,MAA3B;;AACA,oBAAI,CAACI,iBAAL,CAAuBF,KAAvB;;AACA,oBAAI,CAACE,iBAAL,CAAuBD,GAAvB;;AACA,oBAAI,CAACE,qBAAL,GAA6BH,KAAK,CAACI,MAAN,CAAa,CAAb,EAAgBC,KAAhB,CAC1BrD,GAD0B,CACtB,UAACsD,IAAD;AAAA,uBAAUA,IAAI,CAACC,IAAf;AAAA,eADsB,EAE1BC,MAF0B,CAEnB,UAACC,GAAD,EAAMpF,CAAN;AAAA,uBAAYoF,GAAG,CAACC,MAAJ,CAAWrF,CAAX,CAAZ;AAAA,eAFmB,EAEQ,EAFR,CAA7B;AAGA,oBAAI,CAACsF,aAAL,GAAqBV,GAAG,CAACG,MAAJ,CAAW,CAAX,EAAcC,KAAd,CAClBrD,GADkB,CACd,UAACsD,IAAD;AAAA,uBAAUA,IAAI,CAACC,IAAf;AAAA,eADc,EAElBC,MAFkB,CAEX,UAACC,GAAD,EAAMpF,CAAN;AAAA,uBAAYoF,GAAG,CAACC,MAAJ,CAAWrF,CAAX,CAAZ;AAAA,eAFW,EAEgB,EAFhB,CAArB;;AAGA,oBAAI,CAACpB,IAAL,CAAUoC,MAAV,CAAiBF,OAAjB;;AACA,oBAAI,CAAC1C,aAAL,GAAqB,KAArB;AACA,oBAAI,CAACD,qBAAL,GAA6B,KAA7B;;AACA,oBAAI,CAACS,IAAL,CAAU2G,UAAV;AACD;AACF,WAxBH,EAyBG9C,KAzBH,CAyBS,UAAC9B,GAAD;AAAA,mBAAS,MAAI,CAAC2C,YAAL,CAAkB3C,GAAlB,CAAT;AAAA,WAzBT,EA0BG8C,OA1BH,CA0BW;AAAA,mBAAO,MAAI,CAAC1E,kBAAL,GAA0B,KAAjC;AAAA,WA1BX;AA2BD;;;sCACauC,Q,EAA0B;AAAA;;AACtC,cAAMyC,MAAM,GAAG,KAAK1B,kBAApB;AACA,cAAM2B,KAAK,GAAG,KAAKjB,WAAnB;AACA,cAAMvB,IAAI,GAAG,KAAKxD,YAAL,CAAkBiG,QAAlB,CAA2BD,KAA3B,EAAkC1C,QAAlC,CAAb;AACA,eAAKE,IAAL,GAAYA,IAAZ;AACA,cAAMV,OAAO,GAAG,KAAKlC,IAAL,CAAUmC,cAAV,CAAyB,QAAzB,CAAhB;AACA,eAAKjC,iBAAL,GAAyB,IAAzB;AACA7B,iBAAO,CAACgF,GAAR,CAAY,CACV8B,MAAM,CAACP,MAAP,CAAcQ,KAAK,CAACE,QAApB,EAA8B1C,IAAI,CAAC2C,eAAL,CAAqBC,MAAnD,CADU,EAEVL,MAAM,CAACP,MAAP,CAAchC,IAAI,CAAC2C,eAAL,CAAqBC,MAAnC,EAA2C5C,IAAI,CAAC6C,OAAL,CAAaD,MAAxD,CAFU,CAAZ,EAIGjH,IAJH,CAIQ,UAACqI,YAAD,EAAkB;AACtB,gBAAMjB,MAAM,GAAGiB,YAAY,CACxB7D,GADY,CACR,UAAC8C,MAAD;AAAA,qBAAaA,MAAM,CAACF,MAAP,KAAkB,UAAlB,GAA+B,IAA/B,GAAsC,KAAnD;AAAA,aADQ,EAEZY,MAFY,CAEL,UAACC,GAAD,EAAMK,GAAN;AAAA,qBAAcL,GAAG,IAAIK,GAArB;AAAA,aAFK,EAEqB,IAFrB,CAAf;;AAGA,gBAAIlB,MAAJ,EAAY;AACV,kBAAImB,WAAW,GAAGF,YAAY,CAAC,CAAD,CAAZ,CAAgBf,MAAlC;AACA,kBAAIkB,SAAS,GAAGH,YAAY,CAAC,CAAD,CAAZ,CAAgBf,MAAhC;;AACA,oBAAI,CAACmB,gBAAL,CAAsBF,WAAtB;;AACA,oBAAI,CAACE,gBAAL,CAAsBD,SAAtB;;AACA,kBAAIE,WAAW,GAAGH,WAAW,CAACX,MAA9B;AACA,kBAAIe,SAAS,GAAGH,SAAS,CAACZ,MAA1B;;AACA,oBAAI,CAACgB,gBAAL,CAAsBF,WAAtB;;AACA,oBAAI,CAACE,gBAAL,CAAsBD,SAAtB,EARU,CASV;;;AACA,oBAAI,CAAChB,qBAAL,GAA6Be,WAAW,CAAC,CAAD,CAAX,CAAeb,KAAf,CAC1BrD,GAD0B,CACtB,UAACsD,IAAD;AAAA,uBAAUA,IAAI,CAACC,IAAf;AAAA,eADsB,EAE1BC,MAF0B,CAEnB,UAACC,GAAD,EAAMK,GAAN;AAAA,uBAAcL,GAAG,CAACC,MAAJ,CAAWI,GAAX,CAAd;AAAA,eAFmB,EAEY,EAFZ,CAA7B,CAVU,CAaV;;AACA,oBAAI,CAACH,aAAL,GAAqBQ,SAAS,CAAC,CAAD,CAAT,CAAad,KAAb,CAClBrD,GADkB,CACd,UAACsD,IAAD;AAAA,uBAAUA,IAAI,CAACC,IAAf;AAAA,eADc,EAElBC,MAFkB,CAEX,UAACC,GAAD,EAAMK,GAAN;AAAA,uBAAcL,GAAG,CAACC,MAAJ,CAAWI,GAAX,CAAd;AAAA,eAFW,EAEoB,EAFpB,CAArB;;AAGA,oBAAI,CAAC7G,IAAL,CAAUoC,MAAV,CAAiBF,OAAjB;;AACA,oBAAI,CAAClC,IAAL,CAAU2G,UAAV;AACD;AACF,WA5BH,EA6BG9C,KA7BH,CA6BS,UAAC9B,GAAD;AAAA,mBAAS,MAAI,CAAC2C,YAAL,CAAkB3C,GAAlB,CAAT;AAAA,WA7BT,EA8BG8C,OA9BH,CA8BW;AAAA,mBAAO,MAAI,CAAC3E,iBAAL,GAAyB,KAAhC;AAAA,WA9BX;AA+BD;;;yCACwBiG,M,EAAW;AAClCiB,eAAK,CAACC,OAAN,CAAclB,MAAd;AACA,eAAKmB,eAAL,CAAqBnB,MAAM,CAAC,CAAD,CAA3B;AACD;;;wCACuBoB,K,EAAU;AAChC,cAAIA,KAAK,CAACnB,KAAN,KAAgBoB,SAApB,EAA+B;AAC7B,kBAAM,IAAI,sDAAJ,EAAN;AACD;AACF;;;yCAEC3B,M,EAA8B;AAE9B,cAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAC9B,kBAAM,IAAI,sDAAJ,EAAN;AACD;AACF;;;0CAECA,M,EAA8B;AAE9B,cAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAC9B,kBAAM,IAAI,sDAAJ,EAAN;AACD;AACF;;;;;;;uBAvTU9G,sB,EAAsB,gI,EAAA,4H,EAAA,wI,EAAA,mI,EAAA,kJ,EAAA,4H,EAAA,iI;AAAA,K;;;YAAtBA,sB;AAAsB,yC;AAAA,kFAFtB,CAAC,iFAAD,CAEsB,E;AAFD,e;AAAA,c;AAAA,iyC;AAAA;AAAA;ACrClC;;AAME;AAAA,mBAAS,IAAA0I,UAAA,QAAT;AAAiC,WAAjC;;AAGA;;;;AA0DA;;AAyCF;;AACA;;AACE;;AACE;;AACF;;AAEA;;AACE;;;;AAME;;AAEA;;AACE;;AAOF;;AAEA;;AACE;;AAEE;AAAA,mBAAS,IAAAC,gBAAA,0BAAT;AAA+C,WAA/C;;AAGA;;AACF;;AACA;;;;AASE;;AACF;;AACF;;AACF;;AACA;;;;AAKE;;AACA;;AACE;;AAAW;;AAAE;;AACb;;AACE;;AAMF;;AACF;;AACF;;AACA;;AAGA;;AAGF;;AACF;;;;;;AAjLE;;AACA,qJAAgC,MAAhC,EAAgC,EAAhC,EAAgC,gBAAhC,EAAgC,KAAhC;;AAOE;;AAAA,4MAGC,UAHD,EAGC,GAHD;;AAwGoB;;AAAA;;AAKlB;;AAAA;;AAOI;;AAAA;;AAWA;;AAAA;;AAOA;;AAAA;;AAaJ;;AAAA;;AAKc;;AAAA;;AAER;;AAAA;;;;;;;;;;sED7HC3I,sB,EAAsB;cANlC,uDAMkC;eANxB;AACT4I,kBAAQ,EAAE,oBADD;AAETC,qBAAW,EAAE,iCAFJ;AAGTC,mBAAS,EAAE,CAAC,iCAAD,CAHF;AAITC,mBAAS,EAAE,CAAC,iFAAD;AAJF,S;AAMwB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AEzCnC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAGA,QAAM3B,MAAM,GAAW,EAAvB;;QAMa4B,gB;;;;;YAAAA;;;;yBAAAA,gB;AAAgB,O;AAAA,gBAHlB,CAAC,6DAAaC,OAAb,CAAqB7B,MAArB,CAAD,CAGkB,EAFjB,4DAEiB;;;;0HAAhB4B,gB,EAAgB;AAAA;AAAA,kBAFjB,4DAEiB;AAAA,O;AAFL,K;;;;;sEAEXA,gB,EAAgB;cAJ5B,sDAI4B;eAJnB;AACRE,iBAAO,EAAE,CAAC,6DAAaD,OAAb,CAAqB7B,MAArB,CAAD,CADD;AAERtH,iBAAO,EAAE,CAAC,4DAAD;AAFD,S;AAImB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCAhBqJ,Y;;;AAGX,4BAAYC,kBAAZ,EAAoD;AAAA;;AAFpD,aAAAC,KAAA,GAAQ,WAAR;AACO,aAAArF,GAAA,GAAY,IAAZ;AAC+C;;;;8BAChD;AACJsF,gBAAM,CAACC,KAAP,CAAa,SAAb;AACD;;;gCACa;;;;;;;;;;;;;;AAAE;;;mCACLvF,G,EAAU;AACnB,eAAKA,GAAL,GAAWA,GAAX;AAED;;;;;;;uBAXUmF,Y,EAAY,uI;AAAA,K;;;YAAZA,Y;AAAY,+B;AAAA,c;AAAA,a;AAAA;AAAA;ACRzB;;;;;;;;;sEDQaA,Y,EAAY;cALxB,uDAKwB;eALd;AACTP,kBAAQ,EAAE,UADD;AAETC,qBAAW,EAAE,sBAFJ;AAGTC,mBAAS,EAAE,CAAC,sBAAD;AAHF,S;AAKc,Q;;;;;;;;;;;;;;;;;;;;;;AETzB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QA2CaU,S;;;;;YAAAA,S;AAAS,kBAFR,kEAEQ;;;;yBAATA,S;AAAS,O;AAAA,iBAHT,E;AAAE,gBAfJ,CACP,uEADO,EAEP,4FAFO,EAGP,2EAHO,EAIP,wFAJO,EAKP,kEALO,EAMP,sEANO,EAOP,6DAAaP,OAAb,CAAqB,CACnB;AACA;AAFmB,OAArB,CAPO,EAWP,uDAAcA,OAAd,CAAsB;AACpBQ,cAAM,EAAE;AADY,OAAtB,CAXO,CAeI;;;;0HAGFD,S,EAAS;AAAA,uBAzBlB,kEAyBkB,EAxBlB,2FAwBkB,EAvBlB,sGAuBkB,EAtBlB,gGAsBkB,EArBlB,gFAqBkB,EApBlB,8FAoBkB;AApBC,kBAGnB,uEAHmB,EAInB,4FAJmB,EAKnB,2EALmB,EAMnB,wFANmB,EAOnB,kEAPmB,EAQnB,sEARmB,EAQH,4DARG,EAQH,sDARG;AAoBD,O;AAZF,K;;;;;sEAYPA,S,EAAS;cA3BrB,sDA2BqB;eA3BZ;AACRE,sBAAY,EAAE,CACZ,kEADY,EAEZ,2FAFY,EAGZ,sGAHY,EAIZ,gGAJY,EAKZ,gFALY,EAMZ,8FANY,CADN;AASRR,iBAAO,EAAE,CACP,uEADO,EAEP,4FAFO,EAGP,2EAHO,EAIP,wFAJO,EAKP,kEALO,EAMP,sEANO,EAOP,6DAAaD,OAAb,CAAqB,CACnB;AACA;AAFmB,WAArB,CAPO,EAWP,uDAAcA,OAAd,CAAsB;AACpBQ,kBAAM,EAAE;AADY,WAAtB,CAXO,CATD;AAwBRV,mBAAS,EAAE,EAxBH;AAyBRY,mBAAS,EAAE,CAAC,kEAAD;AAzBH,S;AA2BY,Q;;;;;;;;;;;;;;;;;;AC3CtB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAWaC,oB,GAIX,8BAEShG,IAFT,EAKG;AAAA;;AAHM,WAAAA,IAAA,GAAAA,IAAA;AALT,WAAAiG,QAAA,GAAmB,uEAAoB,KAAKjG,IAAL,CAAUD,QAA9B,CAAnB;AACA,WAAAE,IAAA,GAAyD,KAAKD,IAAL,CAAUC,IAAnE;AACA,WAAAiG,OAAA,GAAkB,wDAAK,KAAKlG,IAAL,CAAUD,QAAf,CAAlB;AAOI,K;;;uBAVOiG,oB,EAAoB,gEAKrB,wEALqB,C;AAKN,K;;;YALdA,oB;AAAoB,uC;AAAA,e;AAAA,a;AAAA,sG;AAAA;AAAA;ACXjC;;AACE;;AAEF;;AACA;;AACE;;AAAI;;AAAU;;AACd;;AACE;;AACF;;AACA;;AAAI;;AAAa;;AACjB;;AACE;;AACF;;AACA;;AAAI;;AAAgB;;AACpB;;AACE;;AACF;;AACA;;AACE;;AACF;;AACA;;AACE;;AACF;;AACA;;AACE;;AACF;;AACA;;AACE;;AACF;;AACF;;;;AA5BE;;AAAA;;;;;;;;;sEDUWA,oB,EAAoB;cALhC,uDAKgC;eALtB;AACThB,kBAAQ,EAAE,kBADD;AAETC,qBAAW,EAAE,+BAFJ;AAGTC,mBAAS,EAAE,CAAC,+BAAD;AAHF,S;AAKsB,Q;;;;kBAK5B,oD;mBAAO,wE;;;;;;;;;;;;;;;;;;;;;AEhBZ;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAyEaiB,gB;;;;;YAAAA;;;;yBAAAA,gB;AAAgB,O;AAAA,iBA7BhB,CACT;AACEC,eAAO,EAAE,2EADX;AAEEC,gBAAQ,EAAE;AAAEC,qCAA2B,EAAE;AAA/B;AAFZ,OADS,C;AAKV,gBAzBQ,CACP,wEADO,EAEP,gEAFO,EAGP,2EAHO,EAIP,2EAJO,EAKP,qEALO,EAMP,qFANO,EAOP,uEAPO,EAQP,8EARO,EASP,2EATO,EAUP,qEAVO,EAWP,qEAXO,EAYP,4FAZO,EAaP,8EAbO,EAcP,oEAdO,EAeP,wEAfO,EAgBP,+EAhBO,EAiBP,yEAjBO,EAkBP,qEAlBO,CAyBR,EAEC,wEAFD,EAGC,gEAHD,EAIC,2EAJD,EAKC,2EALD,EAMC,qEAND,EAOC,qEAPD,EAQC,qFARD,EASC,uEATD,EAUC,8EAVD,EAWC,2EAXD,EAYC,qEAZD,EAaC,qEAbD,EAcC,4FAdD,EAeC,8EAfD,EAgBC,oEAhBD,EAiBC,wEAjBD,EAkBC,wEAlBD,EAmBC,+EAnBD,EAoBC,yEApBD,EAqBC,qEArBD;;;;0HAwBUH,gB,EAAgB;AAAA,kBAhDzB,wEAgDyB,EA/CzB,gEA+CyB,EA9CzB,2EA8CyB,EA7CzB,2EA6CyB,EA5CzB,qEA4CyB,EA3CzB,qFA2CyB,EA1CzB,uEA0CyB,EAzCzB,8EAyCyB,EAxCzB,2EAwCyB,EAvCzB,qEAuCyB,EAtCzB,qEAsCyB,EArCzB,4FAqCyB,EApCzB,8EAoCyB,EAnCzB,oEAmCyB,EAlCzB,wEAkCyB,EAjCzB,+EAiCyB,EAhCzB,yEAgCyB,EA/BzB,qEA+ByB;AA/BZ,kBASb,wEATa,EAUb,gEAVa,EAWb,2EAXa,EAYb,2EAZa,EAab,qEAba,EAcb,qEAda,EAeb,qFAfa,EAgBb,uEAhBa,EAiBb,8EAjBa,EAkBb,2EAlBa,EAmBb,qEAnBa,EAoBb,qEApBa,EAqBb,4FArBa,EAsBb,8EAtBa,EAuBb,oEAvBa,EAwBb,wEAxBa,EAyBb,wEAzBa,EA0Bb,+EA1Ba,EA2Bb,yEA3Ba,EA4Bb,qEA5Ba;AA+BY,O;AAHZ,K;;;;;sEAGJA,gB,EAAgB;cAnD5B,sDAmD4B;eAnDnB;AACRL,sBAAY,EAAE,EADN;AAERR,iBAAO,EAAE,CACP,wEADO,EAEP,gEAFO,EAGP,2EAHO,EAIP,2EAJO,EAKP,qEALO,EAMP,qFANO,EAOP,uEAPO,EAQP,8EARO,EASP,2EATO,EAUP,qEAVO,EAWP,qEAXO,EAYP,4FAZO,EAaP,8EAbO,EAcP,oEAdO,EAeP,wEAfO,EAgBP,+EAhBO,EAiBP,yEAjBO,EAkBP,qEAlBO,CAFD;AAsBRH,mBAAS,EAAE,CACT;AACEiB,mBAAO,EAAE,2EADX;AAEEC,oBAAQ,EAAE;AAAEC,yCAA2B,EAAE;AAA/B;AAFZ,WADS,CAtBH;AA4BRpK,iBAAO,EAAE,CACP,wEADO,EAEP,gEAFO,EAGP,2EAHO,EAIP,2EAJO,EAKP,qEALO,EAMP,qEANO,EAOP,qFAPO,EAQP,uEARO,EASP,8EATO,EAUP,2EAVO,EAWP,qEAXO,EAYP,qEAZO,EAaP,4FAbO,EAcP,8EAdO,EAeP,oEAfO,EAgBP,wEAhBO,EAiBP,wEAjBO,EAkBP,+EAlBO,EAmBP,yEAnBO,EAoBP,qEApBO;AA5BD,S;AAmDmB,Q;;;;;;;;;;;;;;;;;;ACzE7B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;QAcaqK,mB;;;AACX,qCAAc;AAAA;AAAE;;;;kDACkB9D,K,EAAgB;AAAA;;AAChD,iBAAO,UAAC+D,CAAD,EAAcC,CAAd,EAA8B;AACnC,mBAAO,MAAI,CAACC,QAAL,CAAcF,CAAC,CAAC3D,MAAhB,EAAwBJ,KAAxB,IAAiC,MAAI,CAACiE,QAAL,CAAcD,CAAC,CAAC5D,MAAhB,EAAwBJ,KAAxB,CAAjC,GACH,CAAC,CADE,GAEH,MAAI,CAACiE,QAAL,CAAcF,CAAC,CAAC3D,MAAhB,EAAwBJ,KAAxB,MAAmC,MAAI,CAACiE,QAAL,CAAcD,CAAC,CAAC5D,MAAhB,EAAwBJ,KAAxB,CAAnC,GACA,CADA,GAEA,CAJJ;AAKD,WAND;AAOD;;;+BAECkE,a,EACAC,a,EACAnE,K,EAAc;AAEd,cAAIS,MAAJ;;AACA,kBAAQyD,aAAa,CAACE,MAAtB;AACE,iBAAK,CAAL;AACE3D,oBAAM,GAAG0D,aAAa,CAACE,IAAd,CAAmB,KAAKC,yBAAL,CAA+BtE,KAA/B,CAAnB,EAA0D,CAA1D,CAAT;AACA;;AACF,iBAAK,CAAL;AACES,oBAAM,GAAGyD,aAAa,CAAC,CAAD,CAAtB;AACA;;AACF;AACEzD,oBAAM,GAAGyD,aAAa,CAACG,IAAd,CAAmB,KAAKC,yBAAL,CAA+BtE,KAA/B,CAAnB,EAA0D,CAA1D,CAAT;AACA;AATJ;;AAWA,iBAAOS,MAAP;AACD;;;iCACgB8D,E,EAAaC,E,EAAW;AACvC,cAAMC,YAAY,GAAG,QAArB;;AACA,cAAMC,GAAG,GAAG,SAANA,GAAM,CAACC,GAAD;AAAA,mBAAkBA,GAAG,GAAGC,IAAI,CAACC,EAAZ,GAAkB,GAAnC;AAAA,WAAZ;;AACA,cAAMC,KAAK,GAAGJ,GAAG,CAACH,EAAE,CAAC,CAAD,CAAH,CAAjB;AACA,cAAMQ,KAAK,GAAGL,GAAG,CAACF,EAAE,CAAC,CAAD,CAAH,CAAjB;AACA,cAAMT,CAAC,GAAGe,KAAK,GAAGC,KAAlB;AACA,cAAMf,CAAC,GAAGU,GAAG,CAACH,EAAE,CAAC,CAAD,CAAH,CAAH,GAAaG,GAAG,CAACF,EAAE,CAAC,CAAD,CAAH,CAA1B;AACA,iBACGI,IAAI,CAACI,KAAL,CACC,IACEJ,IAAI,CAACK,IAAL,CACEL,IAAI,CAACM,IAAL,CACEN,IAAI,CAACO,GAAL,CAASP,IAAI,CAACQ,GAAL,CAASrB,CAAC,GAAG,CAAb,CAAT,EAA0B,CAA1B,IACEa,IAAI,CAACS,GAAL,CAASP,KAAT,IAAkBF,IAAI,CAACS,GAAL,CAASN,KAAT,CAAlB,GAAoCH,IAAI,CAACO,GAAL,CAASP,IAAI,CAACQ,GAAL,CAASpB,CAAC,GAAG,CAAb,CAAT,EAA0B,CAA1B,CAFxC,CADF,CADF,GAOES,YAPF,GAQE,KATH,IAWC,KAXF,GAYA,IAbF;AAeD;;;kCAC+C;AAAA,cAAxCa,QAAwC,uEAAT,OAAS;;AAC9C,kBAAQA,QAAR;AACE,iBAAK,OAAL;AACE,qBAAO;AACLC,yBAAS,EAAE,6DADN;AAELC,gCAAgB,EAAE;AAFb,eAAP;;AAKF;AACE9G,qBAAO,CAACC,GAAR,CAAY,eAAZ;AACA,qBAAO;AACL4G,yBAAS,EAAE,6DADN;AAELC,gCAAgB,EAAE;AAFb,eAAP;AATJ;AAcD;;;6CACoBC,I,EAAsB;AACzC,cAAIC,EAAJ;;AACA,cAAMC,GAAG,GAAG,SAANA,GAAM;AAAA,8CAAIF,IAAJ;AAAIA,kBAAJ;AAAA;;AAAA,mBAAoC,UAAC7E,GAAD,EAAmB;AACjE,kBAAIA,GAAG,CAACgF,GAAJ,KAAY,4DAAaC,OAA7B,EAAsC;AACpC,uBAAOJ,IAAI,CAACK,IAAL,CAAU,UAACC,CAAD;AAAA,yBAAOnF,GAAG,CAACoF,IAAJ,KAAcD,CAArB;AAAA,iBAAV,CAAP;AACD,eAFD,MAEO;AACL,sBAAM,6BAAN;AACD;AACF,aANW;AAAA,WAAZ;;AAOA,kBAAQN,IAAR;AACE,iBAAK,kEAAenL,GAApB;AACEoL,gBAAE,GAAGC,GAAG,CAAC,mEAAoBM,OAArB,EAA8B,mEAAoBC,QAAlD,CAAR;AACA;;AACF,iBAAK,kEAAe3L,KAApB;AACEmL,gBAAE,GAAGC,GAAG,CAAC,mEAAoBQ,OAArB,EAA8B,mEAAoBD,QAAlD,CAAR;AACA;;AACF,iBAAK,kEAAe1L,OAApB;AACEkL,gBAAE,GAAGC,GAAG,CAAC,mEAAoBS,SAArB,EAAgC,mEAAoBD,OAApD,CAAR;AACA;;AACF;AACE;AAXJ;;AAaA,iBAAOT,EAAP;AACD;;;iCACQ1F,K,EAAYyF,I,EAAsB;AACzC,cAAMY,QAAQ,GAAarG,KAAK,CAACsG,MAAjC;;AADyC,8BAEH,KAAKC,OAAL,EAFG;AAAA,cAEnChB,SAFmC,iBAEnCA,SAFmC;AAAA,cAExBC,gBAFwB,iBAExBA,gBAFwB;;AAGzC,cAAIgB,oBAAoB,GAAGjB,SAAS,CAACkB,MAAV,CACzB,KAAKC,oBAAL,CAA0BjB,IAA1B,CADyB,CAA3B;AAGA,cAAIkB,oBAAoB,GAAGH,oBAAoB,CAACC,MAArB,CACzB,UAAC7F,GAAD;AAAA,mBAASA,GAAG,CAACyF,QAAJ,KAAiBA,QAA1B;AAAA,WADyB,CAA3B;AAGA,cAAIO,oBAAoB,GAAGpB,gBAAgB,CAACiB,MAAjB,CAAwB,UAACI,GAAD;AAAA,mBACjDA,GAAG,CAACR,QAAJ,KAAiB,wDAASS,EAA1B,GACID,GAAG,CAACR,QAAJ,GAAe,IAAf,KAAwBA,QAD5B,GAEIQ,GAAG,CAACR,QAAJ,GAAe,GAAf,KAAuBA,QAHsB;AAAA,WAAxB,CAA3B;AAKA,cAAMU,CAAC,GAAG,KAAKC,MAAL,CACRJ,oBADQ,EAERpB,gBAFQ,EAGRxF,KAAK,CAACE,QAHE,CAAV;AAKA,iBAAO;AACLG,mBAAO,EAAE,KAAK2G,MAAL,CACPL,oBADO,EAEPH,oBAFO,EAGPO,CAAC,CAAC3G,MAHK,CADJ;AAMLD,2BAAe,EAAE4G;AANZ,WAAP;AAQD;;;4CAEC5G,e,EACAoF,S,EAAqB;AAErBA,mBAAS,CAAClB,IAAV,CAAe,KAAKC,yBAAL,CAA+BnE,eAAe,CAACC,MAA/C,CAAf;AACA,iBAAOmF,SAAS,CAAC,CAAD,CAAhB;AACD;;;;;;;uBA/HUzB,mB;AAAmB,K;;;aAAnBA,mB;AAAmB,eAAnBA,mBAAmB,K;AAAA,kBAFlB;;;;;sEAEDA,mB,EAAmB;cAH/B,wDAG+B;eAHpB;AACVmD,oBAAU,EAAE;AADF,S;AAGoB,Q;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;QCQnBC,yB;;;AAIX,yCACUC,aADV,EAEUC,gBAFV,EAGUlN,IAHV,EAG0B;AAAA;;AAFhB,aAAAiN,aAAA,GAAAA,aAAA;AACA,aAAAC,gBAAA,GAAAA,gBAAA;AACA,aAAAlN,IAAA,GAAAA,IAAA;AANV,aAAAmN,aAAA,GAA6B,IAAIC,GAAJ,EAA7B;AACA,aAAAC,mBAAA,GAAmC,IAAID,GAAJ,EAAnC;AAMI;;;;gCACI7B,I,EAAsB;AAAA;;AAAA,sCACU,KAAK0B,aAAL,CAAmBZ,OAAnB,EADV;AAAA,cACtBf,gBADsB,yBACtBA,gBADsB;AAAA,cACJD,SADI,yBACJA,SADI;;AAE5BA,mBAAS,GAAGA,SAAS,CAACkB,MAAV,CAAiB,UAAApG,OAAO;AAAA,mBAClC,OAAI,CAACmH,qBAAL,CAA2BnH,OAAO,CAAC2F,IAAnC,EAAyCF,IAAzC,CAA8C,UAAAE,IAAI;AAAA,qBAAIA,IAAI,KAAKP,IAAb;AAAA,aAAlD,CADkC;AAAA,WAAxB,CAAZ,CAF4B,CAK5B;;AACA,iBAAO,KAAKvL,IAAL,CACJyB,GADI,CACc,2BADd,EAEJL,IAFI,CAEC,2DAAI,UAAAmM,CAAC;AAAA,mBAAI,OAAI,CAACC,OAAL,CAAanC,SAAb,EAAwBC,gBAAxB,EAA0CiC,CAA1C,CAAJ;AAAA,WAAL,CAFD,CAAP,CAN4B,CAU5B;AACA;AACA;AACA;AACA;AACA;AACD;;;gCAEClC,S,EACAC,gB,EACAmC,O,CACA;;;;AAEA,cAAIC,KAAK,GAAW,EAApB;AAAA,cACEC,KAAK,GAAW,EADlB;;AAEA,4CAAuBC,MAAM,CAACC,MAAP,CAAc,uDAAd,CAAvB,oCAAgD;AAA3C,gBAAM1B,QAAQ,qBAAd;AACHuB,iBAAK,CAACI,IAAN,CAAW;AACTtO,gBAAE,EAAE2M,QADK;AAET4B,kBAAI,EAAE5B;AAFG,aAAX;AAID;;;;;;;;kBACU6B,M;AACT;AACAN,mBAAK,CAACI,IAAN,CAAW;AACTtO,kBAAE,EAAEwO,MAAM,CAACD,IADF;AAETA,oBAAI,EAAEC,MAAM,CAACD;AAFJ,eAAX;AAIAJ,mBAAK,CAACG,IAAN,CAAW;AACTG,sBAAM,EAAED,MAAM,CAAC7B,QADN;AAETlJ,sBAAM,EAAE+K,MAAM,CAACD,IAFN;AAGTzM,qBAAK,EAAE;AAHE,eAAX;AAKAqM,mBAAK,CAACG,IAAN,CAAW;AACTG,sBAAM,EAAED,MAAM,CAACD,IADN;AAET9K,sBAAM,EAAE+K,MAAM,CAAC/H,eAAP,CAAuB8H,IAFtB;AAGTzM,qBAAK,EAAE;AAHE,eAAX;;AAKA,kBAAM4M,CAAC,GAAG,OAAI,CAACjB,aAAL,CAAmBkB,mBAAnB,CACR7C,gBAAgB,CAAC8C,IAAjB,CAAsB,UAAAvB,CAAC;AAAA,uBAAIA,CAAC,CAACkB,IAAF,KAAWC,MAAM,CAAC/H,eAAP,CAAuB8H,IAAtC;AAAA,eAAvB,CADQ,EAER1C,SAFQ,CAAV;;AAIAsC,mBAAK,CAACG,IAAN,CAAW;AACTG,sBAAM,EAAED,MAAM,CAAC/H,eAAP,CAAuB8H,IADtB;AAET9K,sBAAM,EAAEiL,CAAC,CAACH,IAFD;AAGTzM,qBAAK,EAAE;AAHE,eAAX;;AAKA,qBAAI,CAAC6L,aAAL,CAAmBkB,GAAnB,CAAuBH,CAAC,CAACH,IAAzB;;AACA,qBAAI,CAACV,mBAAL,CAAyBgB,GAAzB,CAA6BL,MAAM,CAAC/H,eAAP,CAAuB8H,IAApD;;;AA1BF,iCAAqBN,OAArB,8HAA8B;AAAA;AA2B7B;;;;;;;;;;;;;;;;;;;;;AACD,kCAA8BnC,gBAA9B,mIAAgD;AAAA,kBAArCrF,eAAqC;;AAC9C,kBAAI,KAAKoH,mBAAL,CAAyBiB,GAAzB,CAA6BrI,eAAe,CAAC8H,IAA7C,CAAJ,EAAwD;AACtDL,qBAAK,CAACI,IAAN,CAAW;AACTtO,oBAAE,EAAEyG,eAAe,CAAC8H,IADX;AAETA,sBAAI,EAAE9H,eAAe,CAAC8H;AAFb,iBAAX;AAID;AAED;;;;;;;;;;;;;;AAaD;;;;;;;;;;;;;;;;;;;;;AAED,kCAAsB1C,SAAtB,mIAAiC;AAAA,kBAAtBlF,OAAsB;;AAC/B,kBAAI,KAAKgH,aAAL,CAAmBmB,GAAnB,CAAuBnI,OAAO,CAAC4H,IAA/B,CAAJ,EAA0C;AACxCL,qBAAK,CAACI,IAAN,CAAW;AACTtO,oBAAE,EAAE2G,OAAO,CAAC4H,IADH;AAETA,sBAAI,EAAE5H,OAAO,CAAC4H;AAFL,iBAAX;AAID;AAED;;;;;;;;AAOD;AACD;;;;;;;;;;;;;;;;;;;;;;;;AAQA,iBAAO;AAAEL,iBAAK,EAALA,KAAF;AAASC,iBAAK,EAALA;AAAT,WAAP;AACD;;;iCACgBO,C,EAAerB,C,EAAe;AAAA;;AAC7CA,WAAC,GAAG,CAACA,CAAC,CAAC,CAAD,CAAF,CAAJ;AACAqB,WAAC,GAAG,CAACA,CAAC,CAAC,CAAD,CAAF,EAAOA,CAAC,CAAC,CAAD,CAAR,CAAJ;AACA,cAAMrI,MAAM,GAAG,KAAKqH,gBAAL,CAAsB1J,EAAtB,EAAf;AACA,cAAM+K,QAAQ,GAAG,kDAAK1I,MAAL,CAAjB;;AAEA,cAAM2I,YAAY,GAAG,SAAfA,YAAe,CAAO3I,MAAP;AAAA,mBAAsC;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AACnD4I,gCADmD,GACtC1F,MAAM,CAAC0F,UAD+B;AAErDC,2BAFqD,GAE7C,CAF6C;;AAGnDC,6BAHmD,GAGzC,SAAVA,OAAU,CAAC7M,CAAD;AAAA,+BACd,IAAI/C,OAAJ,CAAY,UAACC,OAAD,EAAU4P,MAAV;AAAA,iCAAqBH,UAAU,CAAC,UAAA1M,CAAC;AAAA,mCAAI/C,OAAO,EAAX;AAAA,2BAAF,EAAiB8C,CAAjB,CAA/B;AAAA,yBAAZ,CADc;AAAA,uBAHyC;;AAAA;AAAA;AAAA;AAAA;AAAA,mCAKrC+K,CALqC;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAK9CpG,2BAL8C;AAAA;AAAA;AAAA;AAAA;AAAA,mCAMrCyH,CANqC;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAM5CxH,yBAN4C;AAOrDlC,6BAAO,CAACC,GAAR,CAAY,UAAU,EAAEiK,KAAxB;AAPqD;AAQrD,6BAAMC,OAAO,CAAC,OAAO,EAAR,CAAb;;AARqD;AASrDnK,6BAAO,CAACC,GAAR,CAAY,QAAZ;AACAoB,4BAAM,CAACP,MAAP,CAAc,CACZ;AAAED,+BAAO,EAAEoB,KAAK,CAACsH,IAAjB;AAAuBrK,4BAAI,EAAE;AAA7B,uBADY,EAEZ;AAAE2B,+BAAO,EAAEqB,GAAG,CAACqH,IAAf;AAAqBrK,4BAAI,EAAE;AAA3B,uBAFY,CAAd;;AAVqD;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAAA;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAtC;AAAA,WAArB;;AAiBA,iBAAO6K,QAAQ,CAACnN,IAAT,CACL,2DAAI,UAAAyE,MAAM;AAAA,mBAAI2I,YAAY,CAAC3I,MAAD,CAAZ,CAAqBtB,KAArB,CAA2B,UAAA9B,GAAG;AAAA,qBAAI+B,OAAO,CAACC,GAAR,CAAYhC,GAAZ,CAAJ;AAAA,aAA9B,CAAJ;AAAA,WAAV,CADK,EAEL,2DAAI,UAAAoD,MAAM;AAAA,mBACR;AAEA;AACA;AACA;AACA;AACAA,oBAAM,CAAClB,EAAP,CAAU,UAAV;AAPQ;AAAA,WAAV,CAFK,EAWL,iEAXK,EAYL,4DAAKuJ,CAAC,CAAChE,MAAF,GAAW2C,CAAC,CAAC3C,MAAlB,CAZK,EAaL,+DAAQ,UAAA3D,MAAM;AAAA,mBAAUA,MAAM,CAACT,KAAP,CAAc+I,MAAxB;AAAA,WAAd,CAbK,EAcL,gEAAS,UAAAC,KAAK;AAAA,mBAAIA,KAAK,CAAC1N,IAAN,CAAW,gEAAX,CAAJ;AAAA,WAAd,CAdK,EAgBL,2DACE,UAAA2N,OAAO;AAAA,mBACLA,OAAO,CAAC5E,IAAR,CAAa,UAACN,CAAD,EAAIC,CAAJ;AAAA,qBACXD,CAAC,CAAChD,MAAF,CAAS,CAAT,EAAYkD,QAAZ,GAAuBD,CAAC,CAACjD,MAAF,CAAS,CAAT,EAAYkD,QAAnC,GACI,CAAC,CADL,GAEIF,CAAC,CAAChD,MAAF,CAAS,CAAT,EAAYkD,QAAZ,GAAuBD,CAAC,CAACjD,MAAF,CAAS,CAAT,EAAYkD,QAAnC,GACA,CADA,GAEA,CALO;AAAA,aAAb,EAME,CANF,CADK;AAAA,WADT,CAhBK,EA0BL,2DAAI,UAAAxD,MAAM,EAAI;AACZ/B,mBAAO,CAACC,GAAR,CAAY8B,MAAZ;AACA,mBAAO;AACLyI,4BAAc,EAAQzI,MAAM,CAACT,KAAP,CAAciI,IAD/B;AAEL5H,qBAAO,EAAQI,MAAM,CAAC0I,GAAP,CAAYlB;AAFtB,aAAP;AAID,WAND,CA1BK,EAiCL,gEAjCK,CAAP;AAmCD;;;8CAC6BjC,I,EAAyB;AACrD,cAAIP,IAAJ;;AACA,kBAAQO,IAAR;AACE,iBAAK,mEAAoBC,OAAzB;AACER,kBAAI,GAAG,CAAC,kEAAenL,GAAhB,CAAP;AACA;;AACF,iBAAK,mEAAoB6L,OAAzB;AACEV,kBAAI,GAAG,CAAC,kEAAelL,KAAhB,EAAuB,kEAAeC,OAAtC,CAAP;AACA;;AACF,iBAAK,mEAAoB4L,SAAzB;AACEX,kBAAI,GAAG,CAAC,kEAAejL,OAAhB,CAAP;AACA;;AACF,iBAAK,mEAAoB0L,QAAzB;AACET,kBAAI,GAAG,CACL,kEAAenL,GADV,EAEL,kEAAeC,KAFV,EAGL,kEAAeuF,OAHV,CAAP;;AAKF;AACE;AAjBJ;;AAmBA,iBAAO2F,IAAP;AACD;;;;;;;uBAtMUyB,yB,EAAyB,yI,EAAA,mH,EAAA,uH;AAAA,K;;;aAAzBA,yB;AAAyB,eAAzBA,yBAAyB,K;AAAA,kBAFxB;;;;;sEAEDA,yB,EAAyB;cAHrC,wDAGqC;eAH1B;AACVD,oBAAU,EAAE;AADF,S;AAG0B,Q;;;;;;;;;;;;;;;;;;;;;;;;;;ACtBtC;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;ACYE;;;;;;AAEE,oFAAkB,UAAlB,EAAkB,IAAlB,EAAkB,OAAlB,EAAkB,aAAlB,EAAkB,OAAlB,EAAkB,aAAlB;;;;QDFSmC,mB;;;AAIX,mCACUC,kBADV,EAEmC/L,QAFnC,EAE2D;AAAA;;AADjD,aAAA+L,kBAAA,GAAAA,kBAAA;AACyB,aAAA/L,QAAA,GAAAA,QAAA;AAC/B;;;;mCAEO;AACT,eAAKgM,KAAL,GAAa,KAAKD,kBAAL,CAAwB9C,OAAxB,CAAgC,KAAKjJ,QAArC,CAAb,CADS,CAET;AACA;;AACA;;;;;;;;;;;;;;;AAeD;;;;;;;uBA5BU8L,mB,EAAmB,+J,EAAA,gEAMpB,wEANoB,C;AAML,K;;;YANdA,mB;AAAmB,sC;AAAA,kFAFnB,CAAC,8FAAD,CAEmB,E;AAFQ,c;AAAA,a;AAAA,qJ;AAAA;AAAA;ACVxC;;AAAG;;AAAkB;;AAWrB;;AACE;;;;AAOF;;;;AANI;;AAAA;;;;;;;;;;sEDDSA,mB,EAAmB;cAN/B,uDAM+B;eANrB;AACT7G,kBAAQ,EAAE,iBADD;AAETC,qBAAW,EAAE,8BAFJ;AAGTC,mBAAS,EAAE,CAAC,8BAAD,CAHF;AAITC,mBAAS,EAAE,CAAC,8FAAD;AAJF,S;AAMqB,Q;;;;;;kBAM3B,oD;mBAAO,wE;;;;;;;;;;;;;;;;;;;;;AElBZ;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACEI;;AASE;;AAAO;;AAAe;;AACxB;;;;;;AAPE,oFAAkB,GAAlB,EAAkB,WAAlB,EAAkB,OAAlB,EAAkB,yBAAlB,EAAkB,QAAlB,EAAkB,yBAAlB,EAAkB,MAAlB,EAAkB,cAAlB;;AAMO;;AAAA;;;;;;;;AAKT;;AACE;;AAKF;;;;;;AAJI;;AAAA,sFAAoB,QAApB,EAAoB,cAApB,EAAoB,cAApB,EAAoB,cAApB;;;;;;;;AAOJ;;AACE;;AAKE;;AACF;;AACF;;;;;;AANI;;AAAA,yFAAuB,GAAvB,EAAuB,gBAAvB,EAAuB,IAAvB,EAAuB,iBAAvB;;AAIA;;AAAA;;;;QDRK6G,e;;;AAcX,iCAAc;AAAA;;AAbL,aAAAC,SAAA,GAAuB,2DAAUC,OAAjC;AACA,aAAAC,SAAA,GAAY,EAAZ;AACA,aAAAC,WAAA,GAAc,EAAd;AACA,aAAAC,MAAA,GAAS;AAAEC,aAAG,EAAE,EAAP;AAAWC,gBAAM,EAAE,EAAnB;AAAuBC,cAAI,EAAE,EAA7B;AAAiCC,eAAK,EAAE;AAAxC,SAAT;AACA,aAAAC,YAAA,GAAe,QAAf;AAQT,aAAAC,UAAA,GAAa,8DAAa,mEAAb,CAAb;AACgB;;;;mCAEL;AACT,eAAKC,YAAL,GAAoB,KAAKC,QAAL,EAApB;AACD;;;oCACWC,O,EAAwB;AAClC,cAAI,EAAEA,OAAO,CAACxC,KAAR,CAAcyC,aAAd,IAA+BD,OAAO,CAACzC,KAAR,CAAc0C,aAAd,EAAjC,CAAJ,EAAqE;AACnE,gBAAMzC,KAAK,GAAGwC,OAAO,CAACxC,KAAR,CAAc0C,YAA5B;AACA,gBAAM3C,KAAK,GAAGyC,OAAO,CAACzC,KAAR,CAAc2C,YAA5B;AACA,iBAAKJ,YAAL,GAAoB,KAAKC,QAAL,CAAcvC,KAAd,EAAqBD,KAArB,CAApB;AACD;AACF;;;mCAEwD;AAAA,cAAxCA,KAAwC,uEAAhC,KAAKA,KAA2B;AAAA,cAApBC,KAAoB,uEAAZ,KAAKA,KAAO;AACvD,cAAMhM,KAAK,GAAG,KAAK2O,QAAnB;AACA,cAAM1O,MAAM,GAAG,KAAK2O,SAApB;AAEA,cAAMC,KAAK,GAAG,uDAAd;AACA,cAAMC,SAAS,GAAG,2DACfC,SADe,CACLF,KADK,EAEfhB,SAFe,CAEL,KAAKA,SAFA,EAGfC,WAHe,CAGH,KAAKA,WAHF,EAIfkB,MAJe,CAIR,CACN,CAAC,EAAD,EAAK,EAAL,CADM,EAEN,CACEhP,KAAK,GAAG,KAAK+N,MAAL,CAAYG,IAApB,GAA2B,KAAKH,MAAL,CAAYI,KADzC,EAEElO,MAAM,GAAG,KAAK8N,MAAL,CAAYC,GAArB,GAA2B,KAAKD,MAAL,CAAYE,MAFzC,CAFM,CAJQ,EAWfgB,MAXe,CAWR,UAACC,CAAD;AAAA,mBAAOA,CAAC,CAACrR,EAAT;AAAA,WAXQ,CAAlB;AAYA,cAAM6D,IAAI,GAAG;AACXqK,iBAAK,EAALA,KADW;AAEXC,iBAAK,EAALA;AAFW,WAAb;AAIA,cAAMmD,MAAM,GAAGL,SAAS,CAACpN,IAAD,CAAxB;AArBuD;AAAA;AAAA;;AAAA;AAuBvD,kCAAmByN,MAAM,CAACpD,KAA1B,mIAAiC;AAAA,kBAAtBqD,IAAsB;AAC/BA,kBAAI,CAACC,KAAL,GACED,IAAI,CAACC,KAAL,KAAe9I,SAAf,GAA2B,KAAK8H,UAAL,CAAgBe,IAAI,CAAChD,IAArB,CAA3B,GAAwDgD,IAAI,CAACC,KAD/D;AAEAD,kBAAI,CAACE,KAAL,GAAa;AACXnP,iBAAC,EAAEiP,IAAI,CAACG,EAAL,GAAUvP,KAAK,GAAG,CAAlB,GAAsBoP,IAAI,CAACI,EAAL,GAAU,CAAhC,GAAoCJ,IAAI,CAACG,EAAL,GAAU,EADtC;AAEXnP,iBAAC,EAAE,CAACgP,IAAI,CAACK,EAAL,GAAUL,IAAI,CAACM,EAAhB,IAAsB,CAFd;AAGXC,kBAAE,EAAE,KAAKvB;AAHE,eAAb;AAKD;AA/BsD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAgCvD,kCAAmBe,MAAM,CAACnD,KAA1B,mIAAiC;AAAA,kBAAtB4D,IAAsB;;AAC/B,kBAAI,OAAOA,IAAI,CAACtD,MAAZ,KAAuB,QAA3B,EAAqC;AACnCsD,oBAAI,CAACP,KAAL,GAAa,KAAKhB,UAAL,CAAgBuB,IAAI,CAACtD,MAAL,CAAYuD,QAAZ,EAAhB,CAAb;AACD,eAFD,MAEO,IAAI,OAAOD,IAAI,CAACtD,MAAZ,KAAuB,QAA3B,EAAqC;AAC1CsD,oBAAI,CAACP,KAAL,GAAa,KAAKhB,UAAL,CAAgBuB,IAAI,CAACtD,MAArB,CAAb;AACD,eAFM,MAEA;AACLsD,oBAAI,CAACP,KAAL,GAAa,KAAKhB,UAAL,CAAgBuB,IAAI,CAACtD,MAAL,CAAYF,IAA5B,CAAb;AACD;;AACDwD,kBAAI,CAACvK,IAAL,GAAY,yEAAuBuK,IAAvB,CAAZ;AACAA,kBAAI,CAAC5P,KAAL,GAAa+I,IAAI,CAAC+G,GAAL,CAAS,CAAT,EAAYF,IAAI,CAAC5P,KAAjB,CAAb;AACD;AA1CsD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA2CvD,iBAAOmP,MAAP;AACD;;;;;;;uBAvEUzB,e;AAAe,K;;;YAAfA,e;AAAe,iC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,O;AAAA,sF;AAAA,c;AAAA,a;AAAA,0O;AAAA;AAAA;ACvB5B;;AAAA;;AACE;;AACE;;AAWF;;AAEA;;AACE;;AAOF;;AACA;;AACE;;AASF;;AACF;;;;AAnCK,iGAA2B,QAA3B,EAA2B,aAA3B,EAA2B,IAA3B;;AAIC;;AAAA;;AAYc;;AAAA;;AASM;;AAAA;;;;;;;;;sEDFbA,e,EAAe;cAL3B,uDAK2B;eALjB;AACThH,kBAAQ,EAAE,YADD;AAETC,qBAAW,EAAE,yBAFJ;AAGTC,mBAAS,EAAE,CAAC,yBAAD;AAHF,S;AAKiB,Q;;;;gBACzB;;;gBACA;;;gBACA;;;gBACA;;;gBACA;;;gBAEA;;;gBACA;;;gBACA;;;gBACA;;;;;;;;;;;;;;;;;;;;AEjCH;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;ACkBM;;AAIE;AAAA;;AAAA;;AAAA;;AAAA,iBAAS,aAAT;AAAwB,SAAxB;;AAGA;;AAA4C;;AAAI;;AAClD;;;;;;;;AAQI;;AAEE;AAAA;;AAAA;;AAAA;;AAAA;AAAA;;AAGA;;AACF;;;;;;;;AADE;;AAAA;;;;;;;;AAVN;;AACE;;AACE;;AACF;;AACA;;AACE;;AAOF;;AACA;;AACE;;AACF;;AACA;;AACE;;AAAsB;AAAA;;AAAA;;AAAA;;AAAA,iBAAS,gBAAT;AAAyB,SAAzB;;AACpB;;AACF;;AACA;;AAAsB;AAAA;;AAAA;;AAAA;;AAAA,iBAAS,kBAAT;AAA2B,SAA3B;;AACpB;;AACF;;AACF;;AACF;;;;;;;;;;AAvBqB;;AAAA;;AAKf;;AAAA;;AAOe;;AAAA;;;;QD7BdmJ,kB;;;AAcX,kCACUC,kBADV,EAEmB9R,MAFnB,EAEoC;AAAA;;AAD1B,aAAA8R,kBAAA,GAAAA,kBAAA;AACS,aAAA9R,MAAA,GAAAA,MAAA;AAfnB,aAAA+R,UAAA,GAAkC,KAAKD,kBAAL,CAC/BE,OAD+B,CACvB,gEAAYC,OADW,EAE/B1Q,IAF+B,CAG9B,2DAAI,UAAAmF,MAAM;AAAA,iBAAIA,MAAM,CAACwL,OAAX;AAAA,SAAV,CAH8B,EAI9B,8DAJ8B,CAAlC;AAMA,aAAAC,eAAA,GAAoC,CAClC,kEAAe5R,GADmB,EAElC;AACA,0EAAeC,KAHmB,EAIlC,kEAAeC,OAJmB,CAApC;AAMA,aAAA2R,KAAA,GAAQ,sEAAR;AAII;;;;yCAEa7O,Q,EAA0B;AACzC,eAAKvD,MAAL,CAAY6C,IAAZ,CAAiB,6FAAjB,EAAsC;AACpCW,gBAAI,EAAED;AAD8B,WAAtC;AAGD;;;;;;;uBAvBUsO,kB,EAAkB,uI,EAAA,mI;AAAA,K;;;YAAlBA,kB;AAAkB,qC;AAAA,e;AAAA,c;AAAA,kxB;AAAA;AAAA;ACb/B;;AACE;;;;;;;;AAQE;;AAAa;;AAAI;;AACjB;;AACE;;AAA0B;;AAAK;;AAC/B;;AAAmC;;AAAQ;;AAC3C;;AAAmC;;AAAQ;;AAC7C;;AACF;;AACA;;AACE;;AACE;;;;AASA;;AAAM;;AAAS;;AACf;;AACA;;;;AAyBF;;AACA;;AACF;;AACF;;;;AAnDI;;AAAA,8KAA+C,QAA/C,EAA+C,yFAA/C;;AADA;;AAkBI;;AAAA;;AAMG;;AAAA;;;;;;;;;;sEDhBEA,kB,EAAkB;cAL9B,uDAK8B;eALpB;AACTrJ,kBAAQ,EAAE,gBADD;AAETC,qBAAW,EAAE,6BAFJ;AAGTC,mBAAS,EAAE,CAAC,6BAAD;AAHF,S;AAKoB,Q;;;;;;;;;;;;;;;;;;;;;;;;AEZ/B;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAMA,QAAM2J,OAAO,GAAG,CACd;AACEC,QAAE,EAAE,CADN;AAEEC,OAAC,EAAE,IAFL;AAGEC,UAAI,EAAE,QAHR;AAIEC,QAAE,EAAE,WAJN;AAKEC,SAAG,EAAE;AALP,KADc,EAQd;AACEJ,QAAE,EAAE,CADN;AAEEC,OAAC,EAAE,IAFL;AAGEC,UAAI,EAAE,OAHR;AAIEC,QAAE,EAAE,eAJN;AAKEC,SAAG,EAAE;AALP,KARc,EAed;AACEJ,QAAE,EAAE,CADN;AAEEC,OAAC,EAAE,IAFL;AAGEC,UAAI,EAAE,OAHR;AAIEC,QAAE,EAAE,cAJN;AAKEC,SAAG,EAAE;AALP,KAfc,EAsBd;AACEJ,QAAE,EAAE,CADN;AAEEC,OAAC,EAAE,IAFL;AAGEC,UAAI,EAAE,UAHR;AAIEC,QAAE,EAAE,SAJN;AAKEC,SAAG,EAAE;AALP,KAtBc,EA6Bd;AACEJ,QAAE,EAAE,CADN;AAEEC,OAAC,EAAE,IAFL;AAGEC,UAAI,EAAE,OAHR;AAIEC,QAAE,EAAE,UAJN;AAKEC,SAAG,EAAE;AALP,KA7Bc,EAoCd;AACEJ,QAAE,EAAE,CADN;AAEEC,OAAC,EAAE,IAFL;AAGEC,UAAI,EAAE,UAHR;AAIEC,QAAE,EAAE,aAJN;AAKEC,SAAG,EAAE;AALP,KApCc,EA2Cd;AACEJ,QAAE,EAAE,CADN;AAEEC,OAAC,EAAE,IAFL;AAGEC,UAAI,EAAE,OAHR;AAIEC,QAAE,EAAE,OAJN;AAKEC,SAAG,EAAE;AALP,KA3Cc,EAkDd;AACEJ,QAAE,EAAE,CADN;AAEEC,OAAC,EAAE,IAFL;AAGEC,UAAI,EAAE,MAHR;AAIEC,QAAE,EAAE,UAJN;AAKEC,SAAG,EAAE;AALP,KAlDc,EAyDd;AACEJ,QAAE,EAAE,CADN;AAEEC,OAAC,EAAE,IAFL;AAGEC,UAAI,EAAE,OAHR;AAIEC,QAAE,EAAE,WAJN;AAKEC,SAAG,EAAE;AALP,KAzDc,EAgEd;AACEJ,QAAE,EAAE,EADN;AAEEC,OAAC,EAAE,IAFL;AAGEC,UAAI,EAAE,OAHR;AAIEC,QAAE,EAAE,QAJN;AAKEC,SAAG,EAAE;AALP,KAhEc,EAuEd;AACEJ,QAAE,EAAE,EADN;AAEEC,OAAC,EAAE,IAFL;AAGEC,UAAI,EAAE,OAHR;AAIEC,QAAE,EAAE,KAJN;AAKEC,SAAG,EAAE;AALP,KAvEc,EA8Ed;AACEJ,QAAE,EAAE,EADN;AAEEC,OAAC,EAAE,IAFL;AAGEC,UAAI,EAAE,OAHR;AAIEC,QAAE,EAAE,UAJN;AAKEC,SAAG,EAAE;AALP,KA9Ec,EAqFd;AACEJ,QAAE,EAAE,EADN;AAEEC,OAAC,EAAE,IAFL;AAGEC,UAAI,EAAE,OAHR;AAIEC,QAAE,EAAE,UAJN;AAKEC,SAAG,EAAE;AALP,KArFc,EA4Fd;AACEJ,QAAE,EAAE,EADN;AAEEC,OAAC,EAAE,IAFL;AAGEC,UAAI,EAAE,OAHR;AAIEC,QAAE,EAAE,SAJN;AAKEC,SAAG,EAAE;AALP,KA5Fc,EAmGd;AACEJ,QAAE,EAAE,EADN;AAEEC,OAAC,EAAE,IAFL;AAGEC,UAAI,EAAE,MAHR;AAIEC,QAAE,EAAE,UAJN;AAKEC,SAAG,EAAE;AALP,KAnGc,CAAhB;AA2GA,QAAMC,UAAU,GAAG,CACjB;AACEL,QAAE,EAAE,CADN;AAEE,kBAAY,OAFd;AAGEC,OAAC,EAAE,IAHL;AAIEE,QAAE,EAAE,SAJN;AAKEG,UAAI,EAAE,cALR;AAMEF,SAAG,EAAE;AANP,KADiB,EASjB;AACEJ,QAAE,EAAE,CADN;AAEE,kBAAY,SAFd;AAGEC,OAAC,EAAE,IAHL;AAIEE,QAAE,EAAE,SAJN;AAKEG,UAAI,EAAE,gBALR;AAMEF,SAAG,EAAE;AANP,KATiB,EAiBjB;AACEJ,QAAE,EAAE,CADN;AAEE,kBAAY,WAFd;AAGEC,OAAC,EAAE,IAHL;AAIEE,QAAE,EAAE,SAJN;AAKEG,UAAI,EAAE,yBALR;AAMEF,SAAG,EAAE;AANP,KAjBiB,EAyBjB;AACEJ,QAAE,EAAE,CADN;AAEE,kBAAY,SAFd;AAGEC,OAAC,EAAE,IAHL;AAIEE,QAAE,EAAE,SAJN;AAKEG,UAAI,EAAE,eALR;AAMEF,SAAG,EAAE;AANP,KAzBiB,EAiCjB;AACEJ,QAAE,EAAE,CADN;AAEE,kBAAY,OAFd;AAGEC,OAAC,EAAE,IAHL;AAIEE,QAAE,EAAE,kBAJN;AAKEG,UAAI,EAAE,eALR;AAMEF,SAAG,EAAE;AANP,KAjCiB,EAyCjB;AACEJ,QAAE,EAAE,CADN;AAEE,kBAAY,OAFd;AAGEC,OAAC,EAAE,IAHL;AAIEE,QAAE,EAAE,WAJN;AAKEG,UAAI,EAAE,cALR;AAMEF,SAAG,EAAE;AANP,KAzCiB,EAiDjB;AACEJ,QAAE,EAAE,CADN;AAEE,kBAAY,OAFd;AAGEC,OAAC,EAAE,IAHL;AAIEE,QAAE,EAAE,WAJN;AAKEG,UAAI,EAAE,eALR;AAMEF,SAAG,EAAE;AANP,KAjDiB,EAyDjB;AACEJ,QAAE,EAAE,CADN;AAEE,kBAAY,OAFd;AAGEC,OAAC,EAAE,IAHL;AAIEE,QAAE,EAAE,UAJN;AAKEG,UAAI,EAAE,cALR;AAMEF,SAAG,EAAE;AANP,KAzDiB,EAiEjB;AACEJ,QAAE,EAAE,CADN;AAEE,kBAAY,OAFd;AAGEC,OAAC,EAAE,IAHL;AAIEE,QAAE,EAAE,SAJN;AAKEG,UAAI,EAAE,gBALR;AAMEF,SAAG,EAAE;AANP,KAjEiB,EAyEjB;AACEJ,QAAE,EAAE,EADN;AAEE,kBAAY,OAFd;AAGEC,OAAC,EAAE,IAHL;AAIEE,QAAE,EAAE,SAJN;AAKEG,UAAI,EAAE,cALR;AAMEF,SAAG,EAAE;AANP,KAzEiB,EAiFjB;AACEJ,QAAE,EAAE,EADN;AAEE,kBAAY,OAFd;AAGEC,OAAC,EAAE,IAHL;AAIEE,QAAE,EAAE,iBAJN;AAKEG,UAAI,EAAE,kBALR;AAMEF,SAAG,EAAE;AANP,KAjFiB,EAyFjB;AACEJ,QAAE,EAAE,EADN;AAEE,kBAAY,OAFd;AAGEC,OAAC,EAAE,IAHL;AAIEE,QAAE,EAAE,SAJN;AAKEG,UAAI,EAAE,oBALR;AAMEF,SAAG,EAAE;AANP,KAzFiB,EAiGjB;AACEJ,QAAE,EAAE,EADN;AAEE,kBAAY,OAFd;AAGEC,OAAC,EAAE,IAHL;AAIEE,QAAE,EAAE,YAJN;AAKEG,UAAI,EAAE,kBALR;AAMEF,SAAG,EAAE;AANP,KAjGiB,EAyGjB;AACEJ,QAAE,EAAE,EADN;AAEE,kBAAY,SAFd;AAGEC,OAAC,EAAE,IAHL;AAIEE,QAAE,EAAE,WAJN;AAKEG,UAAI,EAAE,cALR;AAMEF,SAAG,EAAE;AANP,KAzGiB,EAiHjB;AACEJ,QAAE,EAAE,EADN;AAEE,kBAAY,WAFd;AAGEC,OAAC,EAAE,IAHL;AAIEE,QAAE,EAAE,SAJN;AAKEG,UAAI,EAAE,cALR;AAMEF,SAAG,EAAE;AANP,KAjHiB,EAyHjB;AACEJ,QAAE,EAAE,EADN;AAEE,kBAAY,YAFd;AAGEC,OAAC,EAAE,IAHL;AAIEE,QAAE,EAAE,KAJN;AAKEG,UAAI,EAAE,cALR;AAMEF,SAAG,EAAE;AANP,KAzHiB,CAAnB;;AAkIA,QAAMG,YAAY,GAAG,SAAfA,YAAe,CAACC,GAAD,EAA0B;AAC7C,UAAIzM,MAAM,GAAY,EAAtB;AAD6C;AAAA;AAAA;;AAAA;AAE7C,8BAAiByM,GAAG,CAACC,KAAJ,CAAU,GAAV,CAAjB,mIAAiC;AAAA,cAAtBC,EAAsB;AAC/B3M,gBAAM,CAAC4H,IAAP,CAAYgF,MAAM,CAACD,EAAD,CAAlB;AACD;AAJ4C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAK7C,aAAO3M,MAAP;AACD,KAND;;AAOA,aAAS6M,OAAT,CAAiBJ,GAAjB,EAAoC;AAClC,UAAIK,SAAS,GAAe,EAA5B;;AACA,UAAI,OAAOL,GAAP,KAAe,OAAOT,OAA1B,EAAmC;AAAA;AAAA;AAAA;;AAAA;AACjC,gCAAmBS,GAAnB,mIAAwB;AAAA,gBAAbM,IAAa;AACtBD,qBAAS,CAAClF,IAAV,CAAe;AACbC,kBAAI,EAAEkF,IAAI,CAACZ,IADE;AAEblG,sBAAQ,EAAY8G,IAAI,CAACb,CAFZ;AAGblM,oBAAM,EAAEwM,YAAY,CAACO,IAAI,CAACV,GAAN,CAHP;AAIb7G,iBAAG,EAAE,4DAAawH;AAJL,aAAf;AAMD;AARgC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASlC;;AACD,aAAOF,SAAP;AACD;;AACD,aAASG,UAAT,CAAoBR,GAApB,EAA4C;AAC1C,UAAIK,SAAS,GAAe,EAA5B;AAD0C;AAAA;AAAA;;AAAA;AAE1C,+BAAmBL,GAAnB,wIAAwB;AAAA,cAAbM,IAAa;AACtBD,mBAAS,CAAClF,IAAV,CAAe;AACbC,gBAAI,EAAEkF,IAAI,CAAC,UAAD,CADG;AAEb9G,oBAAQ,EAAY8G,IAAI,CAACb,CAFZ;AAGblM,kBAAM,EAAEwM,YAAY,CAACO,IAAI,CAACV,GAAN,CAHP;AAIb7G,eAAG,EAAE,4DAAaC,OAJL;AAKbG,gBAAI,EAAEmH,IAAI,CAAC,UAAD,CAAJ,CAAiBG,QAAjB,CAA0B,IAA1B,IACF,mEAAoBrH,OADlB,GAEFkH,IAAI,CAAC,UAAD,CAAJ,CAAiBG,QAAjB,CAA0B,IAA1B,IACA,mEAAoBpH,QADpB,GAEAiH,IAAI,CAAC,UAAD,CAAJ,CAAiBG,QAAjB,CAA0B,IAA1B,IACA,mEAAoBlH,SADpB,GAEA+G,IAAI,CAAC,UAAD,CAAJ,CAAiBG,QAAjB,CAA0B,IAA1B,IACA,mEAAoBnH,OADpB,GAEA,mEAAoBF;AAbX,WAAf;AAeD;AAlByC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAmB1C,aAAOiH,SAAP;AACD;;AAcM,QAAMK,UAAU,GAAGN,OAAO,CAACb,OAAD,CAA1B;AACA,QAAMoB,UAAU,GAAGH,UAAU,CAACX,UAAD,CAA7B;;;;;;;;;;;;;;;;AC5SP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAAA,QAAYe,cAAZ;;AAAA,eAAYA,cAAZ,EAA0B;AACxB;AACA;AACA;AACA;AACD,KALD,EAAYA,cAAc,KAAdA,cAAc,MAA1B;;AAMA,QAAYC,aAAZ;;AAAA,eAAYA,aAAZ,EAAyB;AACvB;AACA;AACA;AACD,KAJD,EAAYA,aAAa,KAAbA,aAAa,MAAzB;;AAKO,QAAMjT,mBAAmB,GAAa,CACzC,KADyC,EAEzC,KAFyC,EAGzC,MAHyC,EAIzC,OAJyC,CAAtC;AAMP,QAAYkT,YAAZ;;AAAA,eAAYA,YAAZ,EAAwB;AACtB;AACD,KAFD,EAAYA,YAAY,KAAZA,YAAY,MAAxB;;;;;;;;;;;;;;;;;ACjBA;AAAA;;;AAAA;AAAA;AAAA;;AAAO,QAAMC,IAAI,GAAG,8nIAalB,KAbkB,EAclB,KAdkB,EAelB,KAfkB,CAAb;;;;;;;;;;;;;;;;ACAP;AAAA;;;AAAA;AAAA;AAAA,O,CAAA;AACA;AACA;;;AAEO,QAAMC,WAAW,GAAG;AACzBC,gBAAU,EAAE;AADa,KAApB;AAIP;;;;;;;AAOA;;;;;;;;;;;;;;;;;ACfA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAMA,QAAI,sEAAYA,UAAhB,EAA4B;AAC1B;AACD;;AAED,gFAAyBC,eAAzB,CAAyC,yDAAzC,EACGtP,KADH,CACS,UAAA9B,GAAG;AAAA,aAAI+B,OAAO,CAACsP,KAAR,CAAcrR,GAAd,CAAJ;AAAA,KADZ;;;;;;;;;;;;;;;;;ACTA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAAA,QAAYsR,YAAZ;;AAAA,eAAYA,YAAZ,EAAwB;AACtB;AACA;AACD,KAHD,EAAYA,YAAY,KAAZA,YAAY,MAAxB;;AAIA,QAAYC,QAAZ;;AAAA,eAAYA,QAAZ,EAAoB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACD,KAjBD,EAAYA,QAAQ,KAARA,QAAQ,MAApB;;AAkBA,QAAYC,mBAAZ;;AAAA,eAAYA,mBAAZ,EAA+B;AAC7B;AACA;AACA;AACA;AACD,KALD,EAAYA,mBAAmB,KAAnBA,mBAAmB,MAA/B;;;;;;;;;;;;;;;;;ACAA;AAAA;;;AAAA;AAAA;AAAA;;AAAA,QAAYC,SAAZ;;AAAA,eAAYA,SAAZ,EAAqB;AACnB;AACA;AACA;AACA;AACD,KALD,EAAYA,SAAS,KAATA,SAAS,MAArB","file":"main-es5.js","sourcesContent":["function webpackEmptyAsyncContext(req) {\n\t// Here Promise.resolve().then() is used instead of new Promise() to prevent\n\t// uncaught exception popping up in devtools\n\treturn Promise.resolve().then(function() {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t});\n}\nwebpackEmptyAsyncContext.keys = function() { return []; };\nwebpackEmptyAsyncContext.resolve = webpackEmptyAsyncContext;\nmodule.exports = webpackEmptyAsyncContext;\nwebpackEmptyAsyncContext.id = \"./$$_lazy_route_resource lazy recursive\";","import { Component, OnDestroy, OnInit, Input } from \"@angular/core\";\nimport { MatDialog } from \"@angular/material/dialog\";\nimport { MatSnackBar } from \"@angular/material/snack-bar\";\nimport { Validators, FormControl } from \"@angular/forms\";\nimport {\n  AmapPlaceSearchService,\n  AmapPlaceSearchWrapper,\n  AmapWalkingService,\n  AmapWalkingWrapper,\n  ILngLat,\n  Map,\n  Poi,\n  PoiList,\n  WalkingResult,\n  WalkRoute,\n  AmapDrivingService,\n  AmapDrivingWrapper,\n  IIcon,\n  DrivingResult,\n} from \"ngx-amap\";\nimport { Observable, Subscription, Subject } from \"rxjs\";\nimport { map, share, tap, takeUntil } from \"rxjs/operators\";\nimport { ContentCardComponent } from \"src/app/content-card/content-card.component\";\nimport { PathScheduleService } from \"src/app/path-schedule.service\";\nimport {\n  RESULT_STATUS,\n  wasteCategroiesName,\n  WASTE_CATEGORY,\n} from \"src/constants/enum\";\nimport { SankeyDemoComponent } from \"src/app/sankey-demo/sankey-demo.component\";\nimport { AssertionError } from \"assert\";\nimport { Position } from \"src/types/data\";\nimport { StreetData } from \"src/constants/data\";\nimport { HttpClient } from \"@angular/common/http\";\n\n@Component({\n  selector: \"app-amap-container\",\n  templateUrl: \"./amap-container.component.html\",\n  styleUrls: [\"./amap-container.component.scss\"],\n  providers: [PathScheduleService],\n})\nexport class AmapContainerComponent implements OnInit, OnDestroy {\n  isShowTransferStation: boolean = false;\n  isShowFactory: boolean = false;\n  temp$: Observable<StreetData[]>;\n  wasteCategories: WASTE_CATEGORY[] = [\n    WASTE_CATEGORY.Dry,\n    WASTE_CATEGORY.Moist,\n    // WASTE_CATEGORY.Harzard,\n    WASTE_CATEGORY.Recycle,\n  ];\n  wasteCategroiesName = wasteCategroiesName;\n\n  isMapReady = false;\n  isLocated = false;\n\n  amap?: Map = null;\n  selectedPoi: Poi;\n\n  amapPlaceSearchPlugin: AmapPlaceSearchWrapper;\n  isPlaceSearchComplete$: Observable<boolean>;\n  isPlaceSearchPending = false;\n  // placeSearchResult: SearchResult;\n\n  amapWalkNaviPlugin: AmapWalkingWrapper;\n  walkNaviResult: WalkingResult;\n  isWalkNaviComplete$: Observable<boolean>;\n  isWalkNaviPending = false;\n\n  amapDriveNaviPlugin: AmapDrivingWrapper;\n  driveNaviResult: DrivingResult;\n  isDriveNaviComplete$: Observable<boolean>;\n  isDriveNaviPending = false;\n\n  pathToTransferStation: ILngLat[];\n  pathToFactory: ILngLat[];\n  dest: { factory: Position; transferStation: Position };\n\n  transferIcon: IIcon;\n  factoryIcon: IIcon;\n  homeIcon: IIcon;\n\n  private _destroy$ = new Subject<void>();\n\n  public addressControl = new FormControl(\"\", Validators.required);\n  public categoryControl = new FormControl(\"\");\n  public isLineHovering: boolean = false;\n  constructor(\n    private readonly amapPlaceSearch: AmapPlaceSearchService,\n    private readonly amapWalkNavi: AmapWalkingService,\n    private readonly snackBar: MatSnackBar,\n    private readonly dialog: MatDialog,\n    private readonly pathSchedule: PathScheduleService,\n    private readonly amapDriveNavi: AmapDrivingService,\n    private readonly http: HttpClient\n  ) {}\n\n  ngOnInit() {\n    this.categoryControl.valueChanges\n      .pipe(takeUntil(this._destroy$))\n      .subscribe((value) => {\n        this.applyDriveNavi(value);\n      });\n    // tslint:disable-next-line: no-backbone-get-set-outside-model\n    this.temp$ = this.http\n      .get<StreetData[]>(\"./assets/sanityCheck.json\")\n      .pipe(takeUntil(this._destroy$));\n    const size = { width: 30, height: 30 };\n    const offset = { x: 0, y: 0 };\n    const options = {\n      size,\n      imageOffset: offset,\n      imageSize: size,\n    };\n    this.transferIcon = {\n      imageSize: size,\n      image: \"./assets/transfer.png\",\n      size: size,\n      imageOffset: offset,\n    };\n    this.factoryIcon = {\n      image: \"./assets/factory.png\",\n      ...options,\n    };\n    this.homeIcon = {\n      image: \"./assets/home.png\",\n      ...options,\n    };\n  }\n  ngOnDestroy() {\n    // this.placeSearchErrorSub.unsubscribe();\n    // this.walkNaviErrorSub.unsubscribe();\n    // this.selectPoiChangeSub.unsubscribe();\n    this._destroy$.next();\n    this._destroy$.complete();\n  }\n  errorHandler(err: string) {\n    this.snackBar.open(`something wrong: ${err}, pls retry`, \"ok\", {\n      duration: 10000,\n    });\n  }\n  clearMarkers() {\n    const amap = this.amap;\n    const markers = amap.getAllOverlays(\"marker\");\n    amap.remove(markers);\n  }\n  showFactory() {\n    this.clearMarkers();\n    this.isShowFactory = !this.isShowFactory;\n  }\n  /**\n   * showTrans\n   */\n  public showTrans() {\n    this.clearMarkers;\n    this.isShowTransferStation = !this.isShowTransferStation;\n  }\n  onLineHover(e: any, type: \"mouseover\" | \"mouseout\") {\n    switch (type) {\n      case \"mouseover\":\n        e.target.setOptions({\n          isOutline: true,\n        });\n        break;\n      case \"mouseout\":\n        e.target.setOptions({\n          isOutline: false,\n        });\n        break;\n\n      default:\n        break;\n    }\n  }\n  onLineClick(category: WASTE_CATEGORY) {\n    this.dialog.open(ContentCardComponent, {\n      data: { category, dest: this.dest },\n    });\n  }\n  onMapReady(amap: Map) {\n    this.isMapReady = true;\n    this.amap = amap;\n    const promisePS = this.amapPlaceSearch.of({\n      map: this.amap,\n      city: \"上海\",\n      citylimit: true,\n      autoFitView: true,\n    });\n    const promiseWN = this.amapWalkNavi.of({\n      // map: this.amap,\n      autoFitView: true,\n    });\n    const promiseDN = this.amapDriveNavi.of({\n      // map: this.amap,\n      autoFitView: true,\n    });\n    Promise.all([promisePS, promiseWN, promiseDN])\n      .then((plugins) => {\n        this.amapPlaceSearchPlugin = plugins[0];\n        this.initPlaceSearch();\n        this.amapWalkNaviPlugin = plugins[1];\n        this.initWalkNavi();\n        this.amapDriveNaviPlugin = plugins[2];\n        this.initDriveNavi();\n      })\n      .catch((err) => console.log(`plugin init error: ${err}`));\n  }\n  initPlaceSearch() {\n    this.isPlaceSearchComplete$ = this.amapPlaceSearchPlugin\n      .on(\"complete\")\n      .pipe(\n        tap((res) => (this.selectedPoi = res.poiList.pois[0])),\n        map((res) => (res.info === RESULT_STATUS.NO_DATA ? false : true)),\n        share()\n      );\n    this.amapPlaceSearchPlugin\n      .on(\"selectChanged\")\n      .pipe(takeUntil(this._destroy$))\n      .subscribe((selectChangeEvent) => {\n        this.selectedPoi = selectChangeEvent.selected.data;\n      });\n    this.amapPlaceSearchPlugin\n      .on(\"error\")\n      .pipe(takeUntil(this._destroy$))\n      .subscribe((err) => this.errorHandler(err));\n  }\n  applyPlaceSearch(keyword: string) {\n    this.isPlaceSearchPending = true;\n    this.amapPlaceSearchPlugin\n      .search(keyword)\n      .catch((err) => this.errorHandler(err))\n      .finally(() => (this.isPlaceSearchPending = false));\n  }\n  initWalkNavi() {\n    this.isWalkNaviComplete$ = this.amapWalkNaviPlugin.on(\"complete\").pipe(\n      tap((res) => (this.walkNaviResult = res)),\n      map((res) => (res.info === RESULT_STATUS.NO_DATA ? false : true)),\n      share()\n    );\n    this.amapPlaceSearchPlugin\n      .on(\"error\")\n      .pipe(takeUntil(this._destroy$))\n      .subscribe((err) => this.errorHandler(err));\n  }\n  initDriveNavi() {\n    this.isDriveNaviComplete$ = this.amapWalkNaviPlugin.on(\"complete\").pipe(\n      tap((res) => (this.driveNaviResult = res)),\n      map((res) => (res.info === RESULT_STATUS.NO_DATA ? false : true)),\n      share()\n    );\n    this.amapDriveNaviPlugin\n      .on(\"error\")\n      .pipe(takeUntil(this._destroy$))\n      .subscribe((err) => this.errorHandler(err));\n  }\n  applyDriveNavi(category: WASTE_CATEGORY) {\n    if (category === WASTE_CATEGORY.Harzard) return;\n    const plugin = this.amapDriveNaviPlugin;\n    const start = this.selectedPoi;\n    const dest = this.pathSchedule.getPoint(start, category);\n    const markers = this.amap.getAllOverlays(\"marker\");\n    this.dest = dest;\n    this.isDriveNaviPending = true;\n    Promise.all([\n      plugin.search(start.location, dest.transferStation.lnglgt, {}),\n      plugin.search(dest.transferStation.lnglgt, dest.factory.lnglgt, {}),\n    ])\n      .then((driveResultes) => {\n        const status = driveResultes.every(\n          (result) => result.status === RESULT_STATUS.COMPLETE\n        );\n        if (status) {\n          let trans = driveResultes[0].result;\n          let fac = driveResultes[1].result;\n          this.assertDriveResult(trans);\n          this.assertDriveResult(fac);\n          this.pathToTransferStation = trans.routes[0].steps\n            .map((step) => step.path)\n            .reduce((acc, x) => acc.concat(x), []);\n          this.pathToFactory = fac.routes[0].steps\n            .map((step) => step.path)\n            .reduce((acc, x) => acc.concat(x), []);\n          this.amap.remove(markers);\n          this.isShowFactory = false;\n          this.isShowTransferStation = false;\n          this.amap.setFitView();\n        }\n      })\n      .catch((err) => this.errorHandler(err))\n      .finally(() => (this.isDriveNaviPending = false));\n  }\n  applyWalkNavi(category: WASTE_CATEGORY) {\n    const plugin = this.amapWalkNaviPlugin;\n    const start = this.selectedPoi;\n    const dest = this.pathSchedule.getPoint(start, category);\n    this.dest = dest;\n    const markers = this.amap.getAllOverlays(\"marker\");\n    this.isWalkNaviPending = true;\n    Promise.all([\n      plugin.search(start.location, dest.transferStation.lnglgt),\n      plugin.search(dest.transferStation.lnglgt, dest.factory.lnglgt),\n    ])\n      .then((walkResultes) => {\n        const status = walkResultes\n          .map((result) => (result.status === \"complete\" ? true : false))\n          .reduce((acc, val) => acc && val, true);\n        if (status) {\n          let resultTrans = walkResultes[0].result;\n          let resultFac = walkResultes[1].result;\n          this.assertWalkResult(resultTrans);\n          this.assertWalkResult(resultFac);\n          let routesTrans = resultTrans.routes;\n          let routesFac = resultFac.routes;\n          this.assertWalkRoutes(routesTrans);\n          this.assertWalkRoutes(routesFac);\n          // lib's type def of WalkingResult.routes was wrong\n          this.pathToTransferStation = routesTrans[0].steps\n            .map((step) => step.path)\n            .reduce((acc, val) => acc.concat(val), []);\n          // resultTrans = walkResultes[1].result;\n          this.pathToFactory = routesFac[0].steps\n            .map((step) => step.path)\n            .reduce((acc, val) => acc.concat(val), []);\n          this.amap.remove(markers);\n          this.amap.setFitView();\n        }\n      })\n      .catch((err) => this.errorHandler(err))\n      .finally(() => (this.isWalkNaviPending = false));\n  }\n  private assertWalkRoutes(routes: any): asserts routes is WalkRoute[] {\n    Array.isArray(routes);\n    this.assertWalkRoute(routes[0]);\n  }\n  private assertWalkRoute(route: any): asserts route is WalkRoute {\n    if (route.steps === undefined) {\n      throw new AssertionError();\n    }\n  }\n  private assertWalkResult(\n    result: string | WalkingResult\n  ): asserts result is WalkingResult {\n    if (typeof result === \"string\") {\n      throw new AssertionError();\n    }\n  }\n  private assertDriveResult(\n    result: string | DrivingResult\n  ): asserts result is DrivingResult {\n    if (typeof result === \"string\") {\n      throw new AssertionError();\n    }\n  }\n}\n","<!--[features]=\"['bg', 'road', 'building', 'poi']\"-->\n\n<ngx-amap\n  class=\"map\"\n  [style.height.px]=\"800\"\n  [center]=\"$any([121.47, 31.23])\"\n  [zoom]=\"13\"\n  [keyboardEnable]=\"false\"\n  (ready)=\"onMapReady($any($event))\"\n  #amap\n>\n  <ng-container\n    *ngIf=\"\n      (isShowTransferStation || isShowFactory) && temp$ | async as data;\n      else normal\n    \"\n  >\n    <ng-container *ngIf=\"isShowTransferStation\">\n      <ng-container *ngFor=\"let datum of data\">\n        <amap-polyline\n          [path]=\"datum.transferStation.path\"\n          [borderWeight]=\"3\"\n          [lineJoin]=\"'round'\"\n          [strokeWeight]=\"5\"\n          [strokeOpacity]=\"0.5\"\n          [strokeColor]=\"'#3366FF'\"\n          [strokeStyle]=\"'solid'\"\n        ></amap-polyline>\n        <amap-marker\n          [position]=\"datum.transferStation.path[0]\"\n          [title]=\"datum.name\"\n          [icon]=\"homeIcon\"\n        ></amap-marker>\n        <amap-marker\n          [position]=\"\n            datum.transferStation.path[datum.transferStation.path.length - 1]\n          \"\n          [title]=\"datum.transferStation.name\"\n          [icon]=\"transferIcon\"\n        ></amap-marker>\n      </ng-container>\n    </ng-container>\n    <ng-container *ngIf=\"isShowFactory\">\n      <ng-container *ngFor=\"let datum of data\">\n        <amap-polyline\n          [path]=\"datum.factory.path\"\n          [borderWeight]=\"3\"\n          [lineJoin]=\"'round'\"\n          [strokeOpacity]=\"0.5\"\n          [strokeWeight]=\"5\"\n          [strokeColor]=\"'red'\"\n          [strokeStyle]=\"'solid'\"\n        ></amap-polyline>\n        <amap-marker\n          [position]=\"\n            datum.transferStation.path[datum.transferStation.path.length - 1]\n          \"\n          [title]=\"datum.transferStation.name\"\n          [icon]=\"transferIcon\"\n        ></amap-marker>\n        <amap-marker\n          [position]=\"datum.factory.path[datum.factory.path.length - 2]\"\n          [title]=\"datum.factory.name\"\n          [icon]=\"factoryIcon\"\n        ></amap-marker>\n      </ng-container>\n    </ng-container>\n  </ng-container>\n\n  <ng-template #normal>\n    <amap-polyline\n      [path]=\"pathToTransferStation\"\n      [borderWeight]=\"3\"\n      [lineJoin]=\"'round'\"\n      [strokeWeight]=\"5\"\n      [outlineColor]=\"'red'\"\n      (mouseOver)=\"onLineHover($event, 'mouseover')\"\n      (mouseOut)=\"onLineHover($event, 'mouseout')\"\n      (polylineClick)=\"onLineClick(categoryControl.value)\"\n    ></amap-polyline>\n    <amap-polyline\n      [path]=\"pathToFactory\"\n      [strokeColor]=\"isLineHovering ? '#3366FF' : '#000000'\"\n      [lineJoin]=\"'round'\"\n      [outlineColor]=\"'red'\"\n      [borderWeight]=\"3\"\n      [strokeWeight]=\"5\"\n      (mouseOver)=\"onLineHover($event, 'mouseover')\"\n      (mouseOut)=\"onLineHover($event, 'mouseout')\"\n      (polylineClick)=\"onLineClick(categoryControl.value)\"\n    ></amap-polyline>\n    <amap-marker\n      *ngIf=\"pathToTransferStation\"\n      [position]=\"pathToTransferStation[0]\"\n      [title]=\"selectedPoi.name\"\n      [icon]=\"homeIcon\"\n    ></amap-marker>\n    <amap-marker\n      *ngIf=\"pathToTransferStation\"\n      [position]=\"pathToTransferStation[pathToTransferStation.length - 1]\"\n      [title]=\"dest.transferStation.name\"\n      [icon]=\"transferIcon\"\n    ></amap-marker>\n    <amap-marker\n      *ngIf=\"pathToFactory\"\n      [position]=\"pathToFactory[pathToFactory.length - 1]\"\n      [title]=\"dest.factory.name\"\n      [icon]=\"factoryIcon\"\n    ></amap-marker>\n  </ng-template>\n</ngx-amap>\n<mat-expansion-panel id=\"searchPanel\" cdkDragBoundry=\".amap-layer\" cdkDrag>\n  <mat-expansion-panel-header>\n    侬晓得哇？\n  </mat-expansion-panel-header>\n\n  <mat-vertical-stepper [linear]=\"true\">\n    <mat-step\n      #stepLocation\n      label=\"step1\"\n      state=\"location\"\n      [completed]=\"(isPlaceSearchComplete$ | async) && addressControl.valid\"\n    >\n      <ng-template matStepLabel>输入起始位置</ng-template>\n\n      <mat-form-field>\n        <input\n          matInput\n          [formControl]=\"addressControl\"\n          type=\"text\"\n          placeholder=\"请输入地址\"\n          required\n        />\n      </mat-form-field>\n\n      <div>\n        <button\n          mat-button\n          (click)=\"applyPlaceSearch(addressControl.value)\"\n          [disabled]=\"isPlaceSearchPending || addressControl.invalid\"\n        >\n          搜索\n        </button>\n        <button\n          mat-button\n          matStepperNext\n          [disabled]=\"\n            isPlaceSearchPending ||\n            !(isPlaceSearchComplete$ | async) ||\n            addressControl.invalid\n          \"\n        >\n          下一步\n        </button>\n      </div>\n    </mat-step>\n    <mat-step\n      label=\"step2\"\n      state=\"category\"\n      [completed]=\"isDriveNaviComplete$ | async\"\n    >\n      <ng-template matStepLabel>选择垃圾类型</ng-template>\n      <mat-form-field class=\"selector\">\n        <mat-label>分类</mat-label>\n        <mat-select [formControl]=\"categoryControl\">\n          <mat-option\n            *ngFor=\"let cate of wasteCategories; let i = index\"\n            [value]=\"cate\"\n          >\n            {{ wasteCategroiesName[i] }}\n          </mat-option>\n        </mat-select>\n      </mat-form-field>\n    </mat-step>\n    <ng-template matStepperIcon=\"location\">\n      <mat-icon>location_on</mat-icon>\n    </ng-template>\n    <ng-template matStepperIcon=\"category\">\n      <mat-icon>receipt</mat-icon>\n    </ng-template>\n  </mat-vertical-stepper>\n</mat-expansion-panel>\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\n\nconst routes: Routes = [];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule { }\n","import { Component } from \"@angular/core\";\nimport { Map } from \"ngx-amap\";\nimport { BreakpointObserver, Breakpoints } from \"@angular/cdk/layout\";\n\n@Component({\n  selector: \"app-root\",\n  templateUrl: \"./app.component.html\",\n  styleUrls: [\"./app.component.scss\"]\n})\nexport class AppComponent {\n  title = '上海市垃圾流通网络';\n  public map?: Map = null;\n  constructor(breakPointObserver: BreakpointObserver) {}\n  run() {\n    window.alert(\"wwwwwww\");\n  }\n  async runAs() {}\n  onMapReady(map: Map) {\n    this.map = map;\n\n  }\n}\n","<!--The content below is only a placeholder and can be replaced.-->\n<app-search-bar></app-search-bar>\n<!--<app-sankey-demo></app-sankey-demo>-->\n","import { NgModule } from \"@angular/core\";\nimport { ReactiveFormsModule } from \"@angular/forms\";\nimport { BrowserModule } from \"@angular/platform-browser\";\nimport { BrowserAnimationsModule } from \"@angular/platform-browser/animations\";\nimport { RouterModule } from \"@angular/router\";\nimport { NgxAmapModule } from \"ngx-amap\";\nimport { AmapContainerComponent } from \"src/app/amap-container/amap-container.component\";\nimport { AppRoutingModule } from \"src/app/app-routing.module\";\nimport { AppComponent } from \"src/app/app.component\";\nimport { ContentCardComponent } from \"src/app/content-card/content-card.component\";\nimport { MyMaterialModule } from \"src/app/my-material/my-material.module\";\nimport { SankeyDemoComponent } from \"src/app/sankey-demo/sankey-demo.component\";\nimport { SankeyComponent } from \"src/app/sankey/sankey.component\";\nimport { SearchBarComponent } from \"src/app/search-bar/search-bar.component\";\nimport { HttpClientJsonpModule, HttpClientModule } from \"@angular/common/http\";\n\n@NgModule({\n  declarations: [\n    AppComponent,\n    SearchBarComponent,\n    AmapContainerComponent,\n    ContentCardComponent,\n    SankeyComponent,\n    SankeyDemoComponent\n  ],\n  imports: [\n    BrowserModule,\n    BrowserAnimationsModule,\n    AppRoutingModule,\n    MyMaterialModule,\n    ReactiveFormsModule,\n    HttpClientModule,\n    RouterModule.forRoot([\n      // { path: './', component: SearchBarComponent },\n      //  { path: './Series1', component: AmapContainerComponent }\n    ]),\n    NgxAmapModule.forRoot({\n      apiKey: \"ff0a330405d98023522079e8380de656\"\n    })\n  ],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}\n","import { Component, OnInit, Inject } from \"@angular/core\";\nimport { MAT_DIALOG_DATA } from \"@angular/material/dialog\";\nimport { WASTE_CATEGORY, wasteCategroiesName } from \"src/constants/enum\";\nimport { text } from \"src/constants/text\";\nimport { Position } from \"src/types/data\";\n\n@Component({\n  selector: \"app-content-card\",\n  templateUrl: \"./content-card.component.html\",\n  styleUrls: [\"./content-card.component.scss\"]\n})\nexport class ContentCardComponent {\n  categroy: string = wasteCategroiesName[this.data.category];\n  dest: { factory: Position; transferStation: Position } = this.data.dest;\n  content: string = text[this.data.category];\n  constructor(\n    @Inject(MAT_DIALOG_DATA)\n    public data: {\n      category: WASTE_CATEGORY;\n      dest: { factory: Position; transferStation: Position };\n    }\n  ) {}\n}\n","<h2 mat-dialog-title>\n  垃圾分类，侬晓得哇？({{ categroy }} -> {{ dest.transferStation.name }} ->\n  {{ dest.factory.name }})\n</h2>\n<div mat-dialog-content class=\"mat-typography text-card\">\n  <h3>第一步：垃圾装包回收</h3>\n  <p>\n    当干垃圾分类回收袋被填满，市民通过微信或电话预约免费上门收取垃圾服务。11：30回收员在预约规定时间内，到达居民家中，对垃圾袋中的垃圾进行称重。并按每公斤0.8元环保金的奖励实时奖励到居民微信环保账户里。自此，一袋垃圾的旅程正式开启。\n  </p>\n  <h3>第二步：垃圾打包、称重带走</h3>\n  <p>\n    回收员到达居民家中，将装包垃圾进行打包、称重后，装进干垃圾专用回收车中。每袋回收垃圾相应的环保金到账后，居民能在线下合作便利店和线上商城进行消费，1元环保金=1元人民币。虽然每公斤垃圾相当于0.8元人民币，不过张大爷介绍，日积月累下来，一年差不多能通过这些“卖出去”的垃圾兑换到价值约500元人民币的日用品。\n  </p>\n  <h3>第三步：用垃圾回收所得兑换消费品</h3>\n  <p>\n    在与“爱分类”合作的商店中，用环保金进行消费。13：45专门运输厨余的湿垃圾车和运输其余垃圾的垃圾车装运完毕，离开社区、街道，开始分别送往后端处理厂。\n  </p>\n  <h3>\n    第四步：运输\n  </h3>\n  <p>\n    专用运输车分类运输垃圾。14：00专用运输车到达分拣中心，这些生活垃圾在这里被细分为50多个种类。仅塑料制品就能被分为十几种，已经淡出我们生活的磁带或光碟，都能在这里集合，被成堆堆放在一起。\n  </p>\n  <h3>\n    第五步：分拣\n  </h3>\n  <p>\n    分拣垃圾，再次打包。到这为止，一袋垃圾旅程算是初步终结，因为到达分拣中心后，每家每户的垃圾无法再进行追溯。从居民家回收的垃圾袋上带有二维码，记录着这袋垃圾的出发地点与重量，而当它们被全部倾倒在分拣平台上，你家的塑料瓶和我家的塑料瓶就没法分出“你我”了，除非在它们未上分拣台前，还能通过二维码查询，知道每袋垃圾的“主人”。次日7：00被精细分类好的垃圾分别被运往填埋场、焚烧厂和再生加工厂进行处理或再利用。部分垃圾会重新化作塑料、衣物、纸张再度回到我们手中。\n  </p>\n</div>\n","import { DragDropModule } from \"@angular/cdk/drag-drop\";\nimport { LayoutModule } from \"@angular/cdk/layout\";\nimport { STEPPER_GLOBAL_OPTIONS } from \"@angular/cdk/stepper\";\nimport { NgModule } from \"@angular/core\";\nimport { MatButtonModule } from \"@angular/material/button\";\nimport { MatButtonToggleModule } from \"@angular/material/button-toggle\";\nimport { MatCardModule } from \"@angular/material/card\";\nimport { MatDialogModule } from \"@angular/material/dialog\";\nimport { MatExpansionModule } from \"@angular/material/expansion\";\nimport { MatFormFieldModule } from \"@angular/material/form-field\";\nimport { MatIconModule } from \"@angular/material/icon\";\nimport { MatInputModule } from \"@angular/material/input\";\nimport { MatListModule } from \"@angular/material/list\";\nimport { MatProgressSpinnerModule } from \"@angular/material/progress-spinner\";\nimport { MatSelectModule } from \"@angular/material/select\";\nimport { MatSidenavModule } from \"@angular/material/sidenav\";\nimport { MatSnackBarModule } from \"@angular/material/snack-bar\";\nimport { MatStepperModule } from \"@angular/material/stepper\";\nimport { MatTabsModule } from \"@angular/material/tabs\";\nimport { MatToolbarModule } from \"@angular/material/toolbar\";\nimport { MatMenuModule } from \"@angular/material/menu\";\n\n@NgModule({\n  declarations: [],\n  imports: [\n    MatButtonModule,\n    LayoutModule,\n    MatToolbarModule,\n    MatSidenavModule,\n    MatIconModule,\n    MatButtonToggleModule,\n    MatInputModule,\n    MatExpansionModule,\n    MatStepperModule,\n    DragDropModule,\n    MatTabsModule,\n    MatProgressSpinnerModule,\n    MatSnackBarModule,\n    MatCardModule,\n    MatDialogModule,\n    MatFormFieldModule,\n    MatSelectModule,\n    MatMenuModule\n  ],\n  providers: [\n    {\n      provide: STEPPER_GLOBAL_OPTIONS,\n      useValue: { displayDefaultIndicatorType: false }\n    }\n  ],\n  exports: [\n    MatButtonModule,\n    LayoutModule,\n    MatToolbarModule,\n    MatSidenavModule,\n    MatIconModule,\n    MatListModule,\n    MatButtonToggleModule,\n    MatInputModule,\n    MatExpansionModule,\n    MatStepperModule,\n    DragDropModule,\n    MatTabsModule,\n    MatProgressSpinnerModule,\n    MatSnackBarModule,\n    MatCardModule,\n    MatDialogModule,\n    MatButtonModule,\n    MatFormFieldModule,\n    MatSelectModule,\n    MatMenuModule\n  ]\n})\nexport class MyMaterialModule {}\n","import { Injectable, OnInit } from \"@angular/core\";\nimport { ILngLat, Poi } from \"ngx-amap\";\nimport { positionsF, positionsT } from \"src/constants/data\";\nimport { WASTE_CATEGORY } from \"src/constants/enum\";\nimport {\n  CATEGORY_OF_FACTORY,\n  DISTRICT,\n  Position,\n  POSITION_TAG,\n} from \"src/types/data\";\n\n@Injectable({\n  providedIn: \"root\",\n})\nexport class PathScheduleService {\n  constructor() {}\n  private shortestDistanceWithStart(start: ILngLat) {\n    return (a: Position, b: Position) => {\n      return this.distance(a.lnglgt, start) < this.distance(b.lnglgt, start)\n        ? -1\n        : this.distance(a.lnglgt, start) === this.distance(b.lnglgt, start)\n        ? 0\n        : 1;\n    };\n  }\n  private decide(\n    xsMatchedDist: Position[],\n    xsMatchedCate: Position[],\n    start: ILngLat\n  ): Position {\n    let result: Position;\n    switch (xsMatchedDist.length) {\n      case 0:\n        result = xsMatchedCate.sort(this.shortestDistanceWithStart(start))[0];\n        break;\n      case 1:\n        result = xsMatchedDist[0];\n        break;\n      default:\n        result = xsMatchedDist.sort(this.shortestDistanceWithStart(start))[0];\n        break;\n    }\n    return result;\n  }\n  private distance(p1: ILngLat, p2: ILngLat): number {\n    const EARTH_RADIUS = 6378.137;\n    const rad = (ang: number) => (ang * Math.PI) / 180;\n    const p1Lat = rad(p1[1]);\n    const p2Lat = rad(p2[1]);\n    const a = p1Lat - p2Lat;\n    const b = rad(p1[0]) - rad(p2[0]);\n    return (\n      (Math.round(\n        2 *\n          Math.asin(\n            Math.sqrt(\n              Math.pow(Math.sin(a / 2), 2) +\n                Math.cos(p1Lat) * Math.cos(p2Lat) * Math.pow(Math.sin(b / 2), 2)\n            )\n          ) *\n          EARTH_RADIUS *\n          10000\n      ) /\n        10000) *\n      1000\n    );\n  }\n  getData(strategy: \"local\" | \"remote\" = \"local\") {\n    switch (strategy) {\n      case \"local\":\n        return {\n          factories: positionsF,\n          transferStations: positionsT,\n        };\n\n      default:\n        console.log(\"not avaliable\");\n        return {\n          factories: positionsF,\n          transferStations: positionsT,\n        };\n    }\n  }\n  getFactroyCateFilter(cate: WASTE_CATEGORY) {\n    let fn: (fac: Position) => boolean;\n    const ffn = (...cate: CATEGORY_OF_FACTORY[]) => (fac: Position) => {\n      if (fac.tag === POSITION_TAG.FACTORY) {\n        return cate.some((c) => fac.kind! === c);\n      } else {\n        throw \"must be a factory positions\";\n      }\n    };\n    switch (cate) {\n      case WASTE_CATEGORY.Dry:\n        fn = ffn(CATEGORY_OF_FACTORY.BURNING, CATEGORY_OF_FACTORY.LANDFILL);\n        break;\n      case WASTE_CATEGORY.Moist:\n        fn = ffn(CATEGORY_OF_FACTORY.RECYCLE, CATEGORY_OF_FACTORY.LANDFILL);\n        break;\n      case WASTE_CATEGORY.Recycle:\n        fn = ffn(CATEGORY_OF_FACTORY.ORG_SOILD, CATEGORY_OF_FACTORY.RECYCLE);\n        break;\n      default:\n        break;\n    }\n    return fn;\n  }\n  getPoint(start: Poi, cate: WASTE_CATEGORY) {\n    const district = <DISTRICT>start.adname;\n    let { factories, transferStations } = this.getData();\n    let factoriesMatchedCate = factories.filter(\n      this.getFactroyCateFilter(cate)\n    );\n    let factoriesMatchedDist = factoriesMatchedCate.filter(\n      (fac) => fac.district === district\n    );\n    let transfersMatchedDist = transferStations.filter((tra) =>\n      tra.district === DISTRICT.PD\n        ? tra.district + \"新区\" === district\n        : tra.district + \"区\" === district\n    );\n    const t = this.decide(\n      transfersMatchedDist,\n      transferStations,\n      start.location\n    );\n    return {\n      factory: this.decide(\n        factoriesMatchedDist,\n        factoriesMatchedCate,\n        t.lnglgt\n      ),\n      transferStation: t,\n    };\n  }\n  getShortestTans2Fac(\n    transferStation: Position,\n    factories: Position[]\n  ): Position {\n    factories.sort(this.shortestDistanceWithStart(transferStation.lnglgt));\n    return factories[0];\n  }\n}\n","import { Injectable, OnInit } from \"@angular/core\";\nimport { AmapDrivingService, AmapDrivingWrapper, Poi } from \"ngx-amap\";\nimport { from, Subscription } from \"rxjs\";\nimport {\n  groupBy,\n  map,\n  mergeAll,\n  mergeMap,\n  take,\n  tap,\n  toArray\n} from \"rxjs/operators\";\nimport { PathScheduleService } from \"src/app/path-schedule.service\";\nimport { WASTE_CATEGORY } from \"src/constants/enum\";\nimport { CATEGORY_OF_FACTORY, DISTRICT, Position } from \"src/types/data\";\nimport { Link, Node } from \"src/types/sankey\";\nimport { HttpClient } from \"@angular/common/http\";\nimport { StreetData } from \"src/constants/data\";\n\n@Injectable({\n  providedIn: \"root\"\n})\nexport class SankeyDataProviderService {\n  destFactories: Set<string> = new Set();\n  destTansferStations: Set<string> = new Set();\n  sub: Subscription;\n  constructor(\n    private pathScheduler: PathScheduleService,\n    private driveNaviService: AmapDrivingService,\n    private http: HttpClient\n  ) {}\n  getData(cate: WASTE_CATEGORY) {\n    let { transferStations, factories } = this.pathScheduler.getData();\n    factories = factories.filter(factory =>\n      this.factoryKind2WasteCate(factory.kind).some(kind => kind === cate)\n    );\n    // tslint:disable-next-line: no-backbone-get-set-outside-model\n    return this.http\n      .get<StreetData[]>(\"./assets/sanityCheck.json\")\n      .pipe(map(s => this.genNode(factories, transferStations, s)));\n\n    // return this.genNode(factories, transferStations);\n    // return this.shortest(factories, transferStations);\n    // return this.shortest(factories, transferStations).pipe(\n    //  tap(v => console.log(v))\n    // map(shortest => this.genNode(factories, transferStations, shortest))\n    // );\n  }\n  private genNode(\n    factories: Position[],\n    transferStations: Position[],\n    streets: StreetData[]\n    // shortest: { tansferStation: string; factory: string }[]\n  ) {\n    let nodes: Node[] = [],\n      links: Link[] = [];\n    for (const district of Object.values(DISTRICT)) {\n      nodes.push({\n        id: district,\n        name: district\n      });\n    }\n    for (const street of streets) {\n      // if ((street.name = \"虹桥\")) continue;\n      nodes.push({\n        id: street.name,\n        name: street.name\n      });\n      links.push({\n        source: street.district,\n        target: street.name,\n        value: 1\n      });\n      links.push({\n        source: street.name,\n        target: street.transferStation.name,\n        value: 1\n      });\n      const f = this.pathScheduler.getShortestTans2Fac(\n        transferStations.find(t => t.name === street.transferStation.name),\n        factories\n      );\n      links.push({\n        source: street.transferStation.name,\n        target: f.name,\n        value: 1\n      });\n      this.destFactories.add(f.name);\n      this.destTansferStations.add(street.transferStation.name);\n    }\n    for (const transferStation of transferStations) {\n      if (this.destTansferStations.has(transferStation.name)) {\n        nodes.push({\n          id: transferStation.name,\n          name: transferStation.name\n        });\n      }\n\n      /* const dest = this.pathScheduler.getShortestTans2Fac(\n        transferStation,\n        factories\n      ).name;\n      this.destFactories.push(dest);\n      links.push({\n        source: transferStation.name,\n        target:\n          // shortest.find(v => v.tansferStation === transferStation.name)\n          //.factory,\n          dest,\n        value: 1\n      }); */\n    }\n\n    for (const factory of factories) {\n      if (this.destFactories.has(factory.name)) {\n        nodes.push({\n          id: factory.name,\n          name: factory.name\n        });\n      }\n\n      /*\n    links.push({\n        source: factory.name,\n        target: wasteCategroiesName[this.factoryKind2WasteCate(factory.kind)],\n        value: 1\n      });\n    */\n    }\n    /*\n    for (const category of wasteCategroiesName) {\n      nodes.push({\n        id: category,\n        name: category\n      });\n    }\n    */\n    return { nodes, links };\n  }\n  private shortest(f: Position[], t: Position[]) {\n    t = [t[0]];\n    f = [f[0], f[1]];\n    const plugin = this.driveNaviService.of();\n    const wrapper$ = from(plugin);\n\n    const invokeSearch = async (plugin: AmapDrivingWrapper) => {\n      const setTimeout = window.setTimeout;\n      let count = 0;\n      const timeout = (x: number) =>\n        new Promise((resolve, reject) => setTimeout(y => resolve(), x));\n      for (const trans of t) {\n        for (const fac of f) {\n          console.log(\"emit \" + ++count);\n          await timeout(1000 * 60);\n          console.log(\"finish\");\n          plugin.search([\n            { keyword: trans.name, city: \"上海\" },\n            { keyword: fac.name, city: \"上海\" }\n          ]);\n        }\n      }\n    };\n    return wrapper$.pipe(\n      tap(plugin => invokeSearch(plugin).catch(err => console.log(err))),\n      map(plugin =>\n        // parameter type was wrong\n\n        // plugin.search([\n        //  { keyword: \"北京市地震局(公交站)\", city: \"北京\" },\n        //  { keyword: \"亦庄文化园(地铁站)\", city: \"北京\" }\n        // ]);\n        plugin.on(\"complete\")\n      ),\n      mergeAll(),\n      take(f.length * t.length),\n      groupBy(result => (<Poi>result.start).adcode),\n      mergeMap(group => group.pipe(toArray())),\n\n      map(\n        results =>\n          results.sort((a, b) =>\n            a.routes[0].distance < b.routes[0].distance\n              ? -1\n              : a.routes[0].distance < b.routes[0].distance\n              ? 0\n              : 1\n          )[0]\n      ),\n      map(result => {\n        console.log(result);\n        return {\n          tansferStation: (<Poi>result.start).name,\n          factory: (<Poi>result.end).name\n        };\n      }),\n      toArray()\n    );\n  }\n  private factoryKind2WasteCate(kind: CATEGORY_OF_FACTORY): WASTE_CATEGORY[] {\n    let cate: WASTE_CATEGORY[];\n    switch (kind) {\n      case CATEGORY_OF_FACTORY.BURNING:\n        cate = [WASTE_CATEGORY.Dry];\n        break;\n      case CATEGORY_OF_FACTORY.RECYCLE:\n        cate = [WASTE_CATEGORY.Moist, WASTE_CATEGORY.Recycle];\n        break;\n      case CATEGORY_OF_FACTORY.ORG_SOILD:\n        cate = [WASTE_CATEGORY.Recycle];\n        break;\n      case CATEGORY_OF_FACTORY.LANDFILL:\n        cate = [\n          WASTE_CATEGORY.Dry,\n          WASTE_CATEGORY.Moist,\n          WASTE_CATEGORY.Harzard\n        ];\n      default:\n        break;\n    }\n    return cate;\n  }\n}\n","import { Component, OnInit, Inject } from \"@angular/core\";\nimport { SankeyDataProviderService } from \"src/app/sankey-data-provider.service\";\nimport { WASTE_CATEGORY } from \"src/constants/enum\";\nimport { Observable } from \"rxjs\";\nimport { Link, Node } from \"src/types/sankey\";\nimport { MAT_DIALOG_DATA } from \"@angular/material/dialog\";\n@Component({\n  selector: \"app-sankey-demo\",\n  templateUrl: \"./sankey-demo.component.html\",\n  styleUrls: [\"./sankey-demo.component.scss\"],\n  providers: [SankeyDataProviderService]\n})\nexport class SankeyDemoComponent implements OnInit {\n  data$: Observable<{ nodes: Node[]; links: Link[] }>;\n  links: Link[];\n  nodes: Node[];\n  constructor(\n    private sankeyDataProvider: SankeyDataProviderService,\n    @Inject(MAT_DIALOG_DATA) private category: WASTE_CATEGORY\n  ) {}\n\n  ngOnInit() {\n    this.data$ = this.sankeyDataProvider.getData(this.category);\n    //this.nodes = nodes;\n    //this.links = links;\n    /*  this.nodes = [\n      { id: \"Alice\", name: \"Alice\" },\n      { id: \"Bob\", name: \"Bob\" },\n      { id: \"Carol\", name: \"Carol\" },\n      { id: \"Ashish\", name: \"Ashish\" },\n      { id: \"Tejas\", name: \"Tejas\" }\n    ];\n    this.links = [\n      { source: 0, target: 1, value: 30 },\n      { source: 0, target: 2, value: 70 },\n      { source: 1, target: 2, value: 10 },\n      { source: 3, target: 1, value: 50 },\n      { source: 4, target: 2, value: 50 }\n    ];\n    */\n  }\n}\n","<p>sankey-demo works!</p>\n<!-- <ng-container *ngIf=\"data$ | async as data; else note\">\n  <app-sankey\n    [svgHeight]=\"500\"\n    [svgWidth]=\"1000\"\n    [links]=\"data.links\"\n    [nodes]=\"data.nodes\"\n  ></app-sankey>\n</ng-container>\n<ng-template #note>hold on......</ng-template>\n-->\n<div mat-dialog-content>\n  <app-sankey\n    *ngIf=\"data$ | async as data\"\n    [svgHeight]=\"2500\"\n    [svgWidth]=\"1200\"\n    [links]=\"data.links\"\n    [nodes]=\"data.nodes\"\n  ></app-sankey>\n</div>\n","import {\n  Component,\n  Input,\n  OnChanges,\n  OnInit,\n  SimpleChanges,\n} from \"@angular/core\";\nimport { sankey, sankeyJustify, sankeyLinkHorizontal } from \"d3-sankey\";\nimport { scaleOrdinal } from \"d3-scale\";\nimport { schemeCategory10 } from \"d3-scale-chromatic\";\nimport {\n  ALIGNMENT,\n  Graph,\n  Link,\n  LinkData,\n  Node,\n  NodeData,\n} from \"src/types/sankey\";\n@Component({\n  selector: \"app-sankey\",\n  templateUrl: \"./sankey.component.html\",\n  styleUrls: [\"./sankey.component.scss\"],\n})\nexport class SankeyComponent implements OnInit, OnChanges {\n  @Input() alignment: ALIGNMENT = ALIGNMENT.JUSTIFY;\n  @Input() nodeWidth = 15;\n  @Input() nodePadding = 10;\n  @Input() margin = { top: 20, bottom: 20, left: 20, right: 20 };\n  @Input() labelPadding = \"0.35em\";\n\n  @Input() svgWidth: number;\n  @Input() svgHeight: number;\n  @Input() nodes: Node[];\n  @Input() links: Link[];\n\n  sankeyLayout: Graph;\n  colorScale = scaleOrdinal(schemeCategory10);\n  constructor() {}\n\n  ngOnInit() {\n    this.sankeyLayout = this.generate();\n  }\n  ngOnChanges(changes: SimpleChanges) {\n    if (!(changes.links.isFirstChange && changes.nodes.isFirstChange())) {\n      const links = changes.links.currentValue;\n      const nodes = changes.nodes.currentValue;\n      this.sankeyLayout = this.generate(links, nodes);\n    }\n  }\n\n  private generate(nodes = this.nodes, links = this.links) {\n    const width = this.svgWidth;\n    const height = this.svgHeight;\n\n    const align = sankeyJustify;\n    const generator = sankey<NodeData, LinkData>()\n      .nodeAlign(align)\n      .nodeWidth(this.nodeWidth)\n      .nodePadding(this.nodePadding)\n      .extent([\n        [20, 20],\n        [\n          width - this.margin.left - this.margin.right,\n          height - this.margin.top - this.margin.bottom,\n        ],\n      ])\n      .nodeId((d) => d.id);\n    const data = {\n      nodes,\n      links,\n    };\n    const layout = generator(data);\n\n    for (const node of layout.nodes) {\n      node.color =\n        node.color === undefined ? this.colorScale(node.name) : node.color;\n      node.label = {\n        x: node.x0 < width / 2 ? node.x1 + 6 : node.x0 - 50,\n        y: (node.y1 + node.y0) / 2,\n        dy: this.labelPadding,\n      };\n    }\n    for (const link of layout.links) {\n      if (typeof link.source === \"number\") {\n        link.color = this.colorScale(link.source.toString());\n      } else if (typeof link.source === \"string\") {\n        link.color = this.colorScale(link.source);\n      } else {\n        link.color = this.colorScale(link.source.name);\n      }\n      link.path = sankeyLinkHorizontal()(link);\n      link.width = Math.max(1, link.width);\n    }\n    return layout;\n  }\n}\n","<svg [style.width.px]=\"svgWidth\" [style.height.px]=\"svgHeight\">\n  <g class=\"nodes\">\n    <rect\n      class=\"node\"\n      *ngFor=\"let node of sankeyLayout.nodes; let $index\"\n      [attr.x]=\"node.x0\"\n      [attr.y]=\"node.y0\"\n      [attr.width]=\"node.x1 - node.x0\"\n      [attr.height]=\"node.y1 - node.y0\"\n      [attr.fill]=\"node.color\"\n    >\n      <title>{{ node.name }}</title>\n    </rect>\n  </g>\n\n  <g class=\"links\">\n    <g class=\"link\" *ngFor=\"let link of sankeyLayout.links; let $index\">\n      <path\n        [attr.d]=\"link.path\"\n        [attr.stroke]=\"link.color\"\n        [attr.stroke-width]=\"link.width\"\n      ></path>\n    </g>\n  </g>\n  <g class=\"labels\">\n    <g class=\"node-label\" *ngFor=\"let node of sankeyLayout.nodes; let $index\">\n      <text\n        [attr.x]=\"node.label.x\"\n        [attr.y]=\"node.label.y\"\n        [attr.dy]=\"node.label.dy\"\n      >\n        {{ node.name }}\n      </text>\n    </g>\n  </g>\n</svg>\n","import { Component } from \"@angular/core\";\nimport { BreakpointObserver, Breakpoints } from \"@angular/cdk/layout\";\nimport { Observable } from \"rxjs\";\nimport { map, share } from \"rxjs/operators\";\nimport { WASTE_CATEGORY, wasteCategroiesName } from \"src/constants/enum\";\nimport { MatDialog } from \"@angular/material/dialog\";\nimport { SankeyDemoComponent } from \"src/app/sankey-demo/sankey-demo.component\";\n\n@Component({\n  selector: \"app-search-bar\",\n  templateUrl: \"./search-bar.component.html\",\n  styleUrls: [\"./search-bar.component.scss\"]\n})\nexport class SearchBarComponent {\n  isHandset$: Observable<boolean> = this.breakpointObserver\n    .observe(Breakpoints.Handset)\n    .pipe(\n      map(result => result.matches),\n      share()\n    );\n  wasteCategroies: WASTE_CATEGORY[] = [\n    WASTE_CATEGORY.Dry,\n    // WASTE_CATEGORY.Harzard,\n    WASTE_CATEGORY.Moist,\n    WASTE_CATEGORY.Recycle\n  ];\n  names = wasteCategroiesName;\n  constructor(\n    private breakpointObserver: BreakpointObserver,\n    private readonly dialog: MatDialog\n  ) {}\n\n  openSankeyDialog(category: WASTE_CATEGORY) {\n    this.dialog.open(SankeyDemoComponent, {\n      data: category\n    });\n  }\n}\n","<mat-sidenav-container class=\"sidenav-container\">\n  <mat-sidenav\n    #drawer\n    class=\"sidenav\"\n    fixedInViewport\n    [attr.role]=\"(isHandset$ | async) ? 'dialog' : 'navigation'\"\n    [mode]=\"(isHandset$ | async) ? 'over' : 'push'\"\n    [opened]=\"(isHandset$ | async) === false\"\n  >\n    <mat-toolbar>Menu</mat-toolbar>\n    <mat-nav-list>\n      <a mat-list-item href=\"#\">侬晓得哇？</a>\n      <a mat-list-item disabled href=\"#\">Series 2</a>\n      <a mat-list-item disabled href=\"#\">Series 3</a>\n    </mat-nav-list>\n  </mat-sidenav>\n  <mat-sidenav-content>\n    <mat-toolbar color=\"primary\">\n      <button\n        type=\"button\"\n        aria-label=\"Toggle sidenav\"\n        mat-icon-button\n        (click)=\"drawer.toggle()\"\n        *ngIf=\"isHandset$ | async\"\n      >\n        <mat-icon aria-label=\"Side nav toggle icon\">menu</mat-icon>\n      </button>\n      <span>上海市垃圾流通网络</span>\n      <span class=\"fill-space\"></span>\n      <nav *ngIf=\"!(isHandset$ | async)\" mat-tab-nav-bar>\n        <button mat-button [mat-menu-trigger-for]=\"sankeyMenu\">\n          显示桑基图\n        </button>\n        <mat-menu #sankeyMenu=\"matMenu\" yPosition=\"below\">\n          <button\n            *ngFor=\"let cate of wasteCategroies\"\n            (click)=\"openSankeyDialog(cate)\"\n            mat-menu-item\n          >\n            {{ names[cate] }}\n          </button>\n        </mat-menu>\n        <button mat-button [mat-menu-trigger-for]=\"networkMenu\">\n          显示网络图\n        </button>\n        <mat-menu #networkMenu=\"matMenu\" yPosition=\"below\">\n          <button mat-menu-item (click)=\"amap.showTrans()\">\n            切换中转站显示\n          </button>\n          <button mat-menu-item (click)=\"amap.showFactory()\">\n            切换处理厂显示\n          </button>\n        </mat-menu>\n      </nav>\n    </mat-toolbar>\n    <app-amap-container #amap class=\"map-container\"> </app-amap-container>\n  </mat-sidenav-content>\n</mat-sidenav-container>\n","import { ILngLat } from \"ngx-amap\";\nimport {\n  DISTRICT,\n  CATEGORY_OF_FACTORY,\n  POSITION_TAG,\n  Position\n} from \"src/types/data\";\nconst rawData = [\n  {\n    序号: 1,\n    区: \"浦东\",\n    设施名称: \"罗山路中转站\",\n    地址: \"高科西路4145弄\",\n    pos: \"121.576022,31.195638 \"\n  },\n  {\n    序号: 2,\n    区: \"浦东\",\n    设施名称: \"周浦中转站\",\n    地址: \"周浦镇新坦瓦公路1356号\",\n    pos: \"121.645194,31.094401 \"\n  },\n  {\n    序号: 3,\n    区: \"浦东\",\n    设施名称: \"惠南中转站\",\n    地址: \"惠南镇下盐公路5001号\",\n    pos: \"121.731788,31.071983 \"\n  },\n  {\n    序号: 4,\n    区: \"浦东\",\n    设施名称: \"唐镇分流转运中心\",\n    地址: \"川沙路近一沁村\",\n    pos: \"121.692535,31.208615 \"\n  },\n  {\n    序号: 5,\n    区: \"浦东\",\n    设施名称: \"张江中转站\",\n    地址: \"军民路1901号\",\n    pos: \"121.616346,31.160352 \"\n  },\n  {\n    序号: 6,\n    区: \"浦东\",\n    设施名称: \"高行分流转运中心\",\n    地址: \"津行路1364弄11号\",\n    pos: \"121.597642,31.309778 \"\n  },\n  {\n    序号: 7,\n    区: \"宝山\",\n    设施名称: \"泰和路码头\",\n    地址: \"泰和路到底\",\n    pos: \"121.484194,31.372257 \"\n  },\n  {\n    序号: 8,\n    区: \"闵行\",\n    设施名称: \"闵吴码头\",\n    地址: \"江川东路301号\",\n    pos: \"121.447597,31.009942 \"\n  },\n  {\n    序号: 9,\n    区: \"黄浦\",\n    设施名称: \"黄浦中转站\",\n    地址: \"中山南路1118号\",\n    pos: \"121.502421,31.211347 \"\n  },\n  {\n    序号: 10,\n    区: \"虹口\",\n    设施名称: \"虹口中转站\",\n    地址: \"黄山路53号\",\n    pos: \"121.47171,31.269332 \"\n  },\n  {\n    序号: 11,\n    区: \"静安\",\n    设施名称: \"静安中转站\",\n    地址: \"海防路\",\n    pos: \"121.46418,31.250319\"\n  },\n  {\n    序号: 12,\n    区: \"杨浦\",\n    设施名称: \"杨浦中转站\",\n    地址: \"军工路3701号\",\n    pos: \"121.537934,31.33448 \"\n  },\n  {\n    序号: 13,\n    区: \"长宁\",\n    设施名称: \"田度中转站\",\n    地址: \"泾力西路860号\",\n    pos: \"121.343787,31.238336 \"\n  },\n  {\n    序号: 14,\n    区: \"宝山\",\n    设施名称: \"虎林路码头\",\n    地址: \"虎林路950号\",\n    pos: \"121.451622,31.349407 \"\n  },\n  {\n    序号: 15,\n    区: \"徐汇\",\n    设施名称: \"徐浦码头\",\n    地址: \"徐梅路7弄55号\",\n    pos: \"121.463074,31.123017 \"\n  }\n];\nconst rawDataTwo = [\n  {\n    序号: 1,\n    \"处置厂（场）名称\": \"江桥焚烧厂\",\n    区: \"嘉定\",\n    地址: \"绥德路800号\",\n    运行单位: \"上海环城再生能源有限公司\",\n    pos: \"121.363682,31.268916 \"\n  },\n  {\n    序号: 2,\n    \"处置厂（场）名称\": \"老港四期填埋场\",\n    区: \"浦东\",\n    地址: \"浦东老港镇东首\",\n    运行单位: \"上海老港生活垃圾处置有限公司\",\n    pos: \"121.87292,31.051303 \"\n  },\n  {\n    序号: 3,\n    \"处置厂（场）名称\": \"老港焚烧厂（一期）\",\n    区: \"浦东\",\n    地址: \"浦东老港镇东首\",\n    运行单位: \"上海环境集团再生能源运营管理有限公司老港分公司\",\n    pos: \"121.87292,31.051303 \"\n  },\n  {\n    序号: 4,\n    \"处置厂（场）名称\": \"老港综合填埋场\",\n    区: \"浦东\",\n    地址: \"浦东老港镇东首\",\n    运行单位: \"上海老港废弃物处置有限公司\",\n    pos: \"121.87292,31.051303 \"\n  },\n  {\n    序号: 5,\n    \"处置厂（场）名称\": \"奉贤焚烧厂\",\n    区: \"奉贤\",\n    地址: \"奉贤化学工业园区漴缺村1488号\",\n    运行单位: \"上海东石塘再生能源有限公司\",\n    pos: \"121.451526,30.829827 \"\n  },\n  {\n    序号: 6,\n    \"处置厂（场）名称\": \"御桥焚烧厂\",\n    区: \"浦东\",\n    地址: \"北蔡御桥路869号\",\n    运行单位: \"上海浦城热电能源有限公司\",\n    pos: \"121.551287,31.154236 \"\n  },\n  {\n    序号: 7,\n    \"处置厂（场）名称\": \"黎明焚烧厂\",\n    区: \"浦东\",\n    地址: \"曹路镇小华江路到底\",\n    运行单位: \"上海黎明资源再利用有限公司\",\n    pos: \"121.718096,31.282576 \"\n  },\n  {\n    序号: 8,\n    \"处置厂（场）名称\": \"嘉定焚烧厂\",\n    区: \"嘉定\",\n    地址: \"嘉定外冈镇古塘村\",\n    运行单位: \"上海嘉定再生能源有限公司\",\n    pos: \"121.117233,31.360046 \"\n  },\n  {\n    序号: 9,\n    \"处置厂（场）名称\": \"金山焚烧厂\",\n    区: \"金山\",\n    地址: \"海金路728号\",\n    运行单位: \"上海金山环境再生能源有限公司\",\n    pos: \"121.279287,30.707395 \"\n  },\n  {\n    序号: 10,\n    \"处置厂（场）名称\": \"松江焚烧厂\",\n    区: \"松江\",\n    地址: \"青天路669号\",\n    运行单位: \"上海天马再生能源有限公司\",\n    pos: \"121.111835,31.089536 \"\n  },\n  {\n    序号: 11,\n    \"处置厂（场）名称\": \"崇明焚烧厂\",\n    区: \"崇明\",\n    地址: \"崇明区港沿镇港沿公路4098号\",\n    运行单位: \"上海城投瀛洲生活垃圾处置有限公司\",\n    pos: \"121.702985,31.631241 \"\n  },\n  {\n    序号: 12,\n    \"处置厂（场）名称\": \"崇明填埋场\",\n    区: \"崇明\",\n    地址: \"堡镇港北闸东侧\",\n    运行单位: \"上海环境集团再生能源运营管理有限公司\",\n    pos: \"121.686901,31.631212 \"\n  },\n  {\n    序号: 13,\n    \"处置厂（场）名称\": \"长兴填埋场\",\n    区: \"崇明\",\n    地址: \"长兴岛合作路永丰为圩\",\n    运行单位: \"上海城投瀛洲生活垃圾处置有限公司\",\n    pos: \"121.778077,31.349146 \"\n  },\n  {\n    序号: 14,\n    \"处置厂（场）名称\": \"青浦综合处理厂\",\n    区: \"青浦\",\n    地址: \"青浦区白鹤镇金米村\",\n    运行单位: \"上海国清生物科技有限公司\",\n    pos: \"121.07974,31.200686 \"\n  },\n  {\n    序号: 15,\n    \"处置厂（场）名称\": \"浦东有机固废处理厂\",\n    区: \"浦东\",\n    地址: \"浩江路108号\",\n    运行单位: \"上海浦东环保发展有限公司\",\n    pos: \"121.71539,31.286654 \"\n  },\n  {\n    序号: 16,\n    \"处置厂（场）名称\": \"闵行餐厨再生资源中心\",\n    区: \"闵行\",\n    地址: \"联友路\",\n    运行单位: \"上海文鑫生物科技有限公司\",\n    pos: \"121.259806,31.247924 \"\n  }\n];\nconst array2LngLgt = (raw: string): ILngLat => {\n  let lnglgt: ILngLat = [];\n  for (const it of raw.split(\",\")) {\n    lnglgt.push(Number(it));\n  }\n  return lnglgt;\n};\nfunction convert(raw: typeof rawData): Position[] {\n  let positions: Position[] = [];\n  if (typeof raw === typeof rawData) {\n    for (const item of raw) {\n      positions.push({\n        name: item.设施名称,\n        district: <DISTRICT>item.区,\n        lnglgt: array2LngLgt(item.pos),\n        tag: POSITION_TAG.TANSFER_STATION\n      });\n    }\n  }\n  return positions;\n}\nfunction convertFac(raw: typeof rawDataTwo) {\n  let positions: Position[] = [];\n  for (const item of raw) {\n    positions.push({\n      name: item[\"处置厂（场）名称\"],\n      district: <DISTRICT>item.区,\n      lnglgt: array2LngLgt(item.pos),\n      tag: POSITION_TAG.FACTORY,\n      kind: item[\"处置厂（场）名称\"].includes(\"焚烧\")\n        ? CATEGORY_OF_FACTORY.BURNING\n        : item[\"处置厂（场）名称\"].includes(\"填埋\")\n        ? CATEGORY_OF_FACTORY.LANDFILL\n        : item[\"处置厂（场）名称\"].includes(\"固废\")\n        ? CATEGORY_OF_FACTORY.ORG_SOILD\n        : item[\"处置厂（场）名称\"].includes(\"再生\")\n        ? CATEGORY_OF_FACTORY.RECYCLE\n        : CATEGORY_OF_FACTORY.BURNING\n    });\n  }\n  return positions;\n}\nexport interface StreetData {\n  name: string;\n  district: string;\n  transferStation: {\n    name: string;\n    path: any;\n  };\n  factory: {\n    name: string;\n    path: any;\n  };\n}\n\nexport const positionsT = convert(rawData);\nexport const positionsF = convertFac(rawDataTwo);\n","export enum WASTE_CATEGORY {\n  Dry,\n  Moist,\n  Harzard,\n  Recycle\n}\nexport enum RESULT_STATUS {\n  NO_DATA = 'no_data',\n  COMPLETE = 'complete',\n  ERROR = 'error'\n}\nexport const wasteCategroiesName: string[] = [\n    '干垃圾',\n    '湿垃圾',\n    '有害垃圾',\n    '可回收垃圾'\n  ];\nexport enum ERROR_STATUS {\n  wip\n}\n","export const text = [\n  `第一步：垃圾装包回收\n  当干垃圾分类回收袋被填满，市民通过微信或电话预约免费上门收取垃圾服务。11：30回收员在预约规定时间内，到达居民家中，对垃圾袋中的垃圾进行称重。并按每公斤0.8元环保金的奖励实时奖励到居民微信环保账户里。自此，一袋垃圾的旅程正式开启。\n  第二步：垃圾打包、称重带走\n\n  回收员到达居民家中，将装包垃圾进行打包、称重后，装进干垃圾专用回收车中。每袋回收垃圾相应的环保金到账后，居民能在线下合作便利店和线上商城进行消费，1元环保金=1元人民币。虽然每公斤垃圾相当于0.8元人民币，不过张大爷介绍，日积月累下来，一年差不多能通过这些“卖出去”的垃圾兑换到价值约500元人民币的日用品。\n  第三步：用垃圾回收所得兑换消费品\n  在与“爱分类”合作的商店中，用环保金进行消费。13：45专门运输厨余的湿垃圾车和运输其余垃圾的垃圾车装运完毕，离开社区、街道，开始分别送往后端处理厂。\n  第四步：运输\n  专用运输车分类运输垃圾。14：00专用运输车到达分拣中心，这些生活垃圾在这里被细分为50多个种类。仅塑料制品就能被分为十几种，已经淡出我们生活的磁带或光碟，都能在这里集合，被成堆堆放在一起。\n  第五步：分拣\n  分拣垃圾，再次打包。到这为止，一袋垃圾旅程算是初步终结，因为到达分拣中心后，每家每户的垃圾无法再进行追溯。从居民家回收的垃圾袋上带有二维码，记录着这袋垃圾的出发地点与重量，而当它们被全部倾倒在分拣平台上，你家的塑料瓶和我家的塑料瓶就没法分出“你我”了，除非在它们未上分拣台前，还能通过二维码查询，知道每袋垃圾的“主人”。次日7：00被精细分类好的垃圾分别被运往填埋场、焚烧厂和再生加工厂进行处理或再利用。部分垃圾会重新化作塑料、衣物、纸张再度回到我们手中。\n  `,\n  'wip',\n  'wip',\n  'wip'\n];\n","// This file can be replaced during build by using the `fileReplacements` array.\n// `ng build --prod` replaces `environment.ts` with `environment.prod.ts`.\n// The list of file replacements can be found in `angular.json`.\n\nexport const environment = {\n  production: false\n};\n\n/*\n * For easier debugging in development mode, you can import the following file\n * to ignore zone related error stack frames such as `zone.run`, `zoneDelegate.invokeTask`.\n *\n * This import should be commented out in production mode because it will have a negative impact\n * on performance if an error is thrown.\n */\n// import 'zone.js/dist/zone-error';  // Included with Angular CLI.\n","import { enableProdMode } from '@angular/core';\nimport { platformBrowserDynamic } from '@angular/platform-browser-dynamic';\n\nimport { AppModule } from './app/app.module';\nimport { environment } from './environments/environment';\n\nif (environment.production) {\n  enableProdMode();\n}\n\nplatformBrowserDynamic().bootstrapModule(AppModule)\n  .catch(err => console.error(err));\n","import { ILngLat } from \"ngx-amap\";\nexport enum POSITION_TAG {\n  TANSFER_STATION,\n  FACTORY\n}\nexport enum DISTRICT {\n  YP = \"杨浦\",\n  PD = \"浦东\",\n  BS = \"宝山\",\n  MH = \"闵行\",\n  HP = \"黄浦\",\n  HK = \"虹口\",\n  JA = \"静安\",\n  CN = \"长宁\",\n  XH = \"徐汇\",\n  FX = \"奉贤\",\n  JS = \"金山\",\n  PT = \"普陀\",\n  JD = \"嘉定\",\n  QP = \"青浦\",\n  CM = \"崇明\",\n  SJ = \"松江\"\n}\nexport enum CATEGORY_OF_FACTORY {\n  LANDFILL,\n  BURNING,\n  ORG_SOILD,\n  RECYCLE\n}\nexport interface Position {\n  name: string;\n  district: DISTRICT;\n  lnglgt: ILngLat;\n  tag: POSITION_TAG;\n  kind?: CATEGORY_OF_FACTORY;\n}\nexport interface RawData {}\n","import {\n  SankeyLink,\n  SankeyNode,\n  SankeyNodeMinimal,\n  SankeyExtraProperties,\n  SankeyLayout,\n  SankeyGraph\n} from \"d3-sankey\";\nexport interface LabelProperties {\n  x: number;\n  y: number;\n  dy: number | string;\n  \n}\nexport interface LinkData extends SankeyExtraProperties {\n  color?: string;\n  path?: string;\n}\nexport interface NodeData extends SankeyExtraProperties {\n  color?: string;\n  name?: string;\n  label?: LabelProperties;\n}\nexport enum ALIGNMENT {\n  CENTER = \"Center\",\n  LEFT = \"Left\",\n  RIGHT = \"Right\",\n  JUSTIFY = \"Justify\"\n}\nexport type Link = SankeyLink<NodeData, LinkData>;\nexport type Node = SankeyNode<NodeData, LinkData>;\nexport type Graph = SankeyGraph<NodeData, LinkData>;\n"]}